"use strict";!function(){function t(){null===it&&(it=new Audio(W+"meep_mop.mp3"),it.volume=.5),it.pause(),it.currentTime=0,it.play()}function e(t,e,i){if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,i);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",i),n.moveStart("character",e),n.select()}}function i(t){t.addClass("Loaded_js")}function n(t,e,i){var n=a(t);return i&&n.addClass("itemIconWithTooltip").attr("itemname",e.GetKey()),n}function a(t){var e=$("<img>");return t&&e.attr("src",t),s(e),e}function s(t){return r(t,i)}function r(t,e){return VUtils.Assert(t&&t.length),t[0].complete?(e(t),t):t.load(function(){e($(this))})}function o(t){return void 0!==K[t]&&t>0}function m(t){return VUtils.Assert(o(t)),F+"miniheroes/"+K[t].key+".png"}function l(t){return VUtils.Assert(o(t)),F+"heroes/"+K[t].key+"_hphover.png"}function h(t){return F+"heroes/"+K[t].key+"_full.png"}function _(t,e){return VUtils.AssertMsg(void 0!==Y[t],"No item data for item with item ID "+t),F+"items/"+Y[t].base_img+(e?"_eg":"_lg")+".png"}function u(t){return t===rt.TEAM_RADIANT?rt.TEAM_DIRE:rt.TEAM_RADIANT}function d(t){return t=t.toLowerCase(),"radiant"===t?rt.TEAM_RADIANT:"dire"===t?rt.TEAM_DIRE:void VUtils.Assert(!1)}function c(t){return t===rt.TEAM_RADIANT?"Radiant":"Dire"}function p(){var t=U.length,e=parseInt(1e3*Math.random())%t;return K[U[e]].id}function f(){window.location.href=q}function T(t){return z[t].name}function g(t){return-1!==["empty"].indexOf(t)}function I(t){var e=VUtils.GetTime()-at;return st.shuffle_teams&&5>e%10?t==rt.TEAM_RADIANT?1838315:4:t==rt.TEAM_RADIANT?3:5}function P(t,e,i){VUtils.Assert(t.length),t[0].contentWindow.postMessage(i,e)}function A(t){B=new Rt(t),B.Init(),O.OnNewMatch()}function S(t){VUtils.Assert(null===b),$.get(Z,{league_id:t},function(e){b=new Mt,b.Init(t,e),O.OnInitTournament(t);for(var i=0,n=nt.length;n>i;++i)nt[i]();nt=[]})}function v(t){return b?void t():void nt.push(t)}function D(t){function e(){O.OnWindowResize()}function n(){var t=VUtils.GetTime(),e=t-a;a=t,E&&(w.SimulateStream(t,e),w.BShouldTransmit()&&(w.Transmit(s),O.OnDataReceived())),b&&b.Think(t,e),B&&B.Think(t,e),O.Think(t,e),window.requestAnimationFrame(n)}y=t.is_dev,M=t.is_mobile,R=t.is_logged_in,C=t.stream_language,E=t.simulation,G=t.localization,x=t.dota_iframe_origin_url,F=t.base_img_url,W=t.base_audio_url,V=t.steam_broadcast_origin,K=t.hero_data,z=t.hero_data_localized,Y=t.item_data,X=t.emoticon_data,j=t.emoticon_url_for_userdata,q=t.login_url,J=t.post_and_get_cheers_webapi_url,Z=t.get_tournament_data_url,k=t.leagues_base_url,Q=t.noise,G=t.localization,tt=t.currency,at=VUtils.GetTime();var a=VUtils.GetTime();U=Object.keys(K),w=new pt,L=new gt,N=new It,N.Init(),H=new At,H.Init(),O=new xt,O.Init();var s=new ct;$(window).resize(e),setTimeout(function(){e(),O.ShowStatsPanelByDivName(rt.DIV_ID_STATSPANEL_PLAYERS),O.ShowSpectatorStatsPanel(),$(".AutoLoad").addClass("Loaded_js")},100),$(window).on("message",function(t){if(-1!==[V,x].indexOf(t.originalEvent.origin)){var e=t.originalEvent.data;switch(e.msg){case"OnGameDataReceived":E||(s.ProcessDataReceived(e.data),O.OnDataReceived());break;case"OnBroadcastIDChanged":N.OnBroadcastIDChanged(e.broadcastid),N.Show();break;case"OnBroadcastInfoChanged":void 0!==e.viewer_count&&(et=e.viewer_count);break;case"DoRedirectToLogin":case"OnLoginButtonClicked":f();break;case"OpenNewTab":window.open(e.url,"_blank");break;case"OnGraphSystemReady":var i=O.GetMatchStatsPanel();i.PopulateGraphComboBox(e.graphs),i.SwitchToNewGraphType("Gold");break;case"InitGraphUI":O.GetMatchStatsPanel().OnIFrameGraphSystemUIInit(e.graph_options)}y&&st.spew_events&&console.log(t.originalEvent.data)}}),$(document.body).imagesLoaded().progress(function(t,e){e.isLoaded&&i($(e.img))}),$("img").load(function(){i($(this))}),M&&void 0!==window.orientationchange&&$(window).on("orientationchange",function(t){0==window.orientation}),window.requestAnimationFrame(n)}var y=null,M=null,R=null,C=null,E=null,G=null,N=null,L=null,H=null,b=null,B=null,O=null,w=null,U=null,k=null,x=null,V=null,F=null,W=null,K=null,z=null,Y=null,X=null,j=null,q=null,J=null,Z=null,Q=null,G=null,tt=null,et=null,it=null,nt=[],at=null,st={cheer_use_stream_values:!0,force_teams:!1,spew_events:!1,shuffle_teams:!1},rt={LEAGUE_ID_TI5:2733,TEAM_RADIANT:2,TEAM_DIRE:3,DOTA_LANE_NONE:0,DOTA_LANE_TOP:1,DOTA_LANE_MIDDLE:2,DOTA_LANE_BOTTOM:3,DOTA_RUNE_DOUBLEDAMAGE:0,DOTA_RUNE_HASTE:1,DOTA_RUNE_ILLUSION:2,DOTA_RUNE_INVISIBILITY:3,DOTA_RUNE_REGENERATION:4,DOTA_RUNE_BOUNTY:5,PLAYERS_PER_TEAM:5,NUM_ITEM_SLOTS:6,MAX_HERO_ABILITIES:6,MAX_HERO_ABILITIES_INCLUDING_ATTRIBUTE_BONUS:7,MAX_HERO_LEVEL:25,HERO_TO_HERO_KILLS:0,HERO_TO_HERO_ASSISTS:1,HERO_TO_HERO_TYPE_COUNT:2,COLOR_RADIANT:"#5f812f",COLOR_DIRE:"#892f2e",COLOR_MINIMAP_HOVER_STROKE:"#d28116",PANELGROUP_ID_MAIN:"PanelGroup_Main",DIV_ID_SPECTATOR_STATS:"Panel_SpectatorStats",DIV_ID_TOURNAMENT_AD:"Panel_TournamentBox",DIV_ID_TOURNAMENT_CHEER:"Panel_TournamentCheer",DIV_ID_OVERVIEW_HEADER:"Panel_OverviewHeader",DIV_ID_STATSPANEL_PLAYERS:"Panel_Players",DIV_ID_STATSPANEL_PLAYERDETAILS:"Panel_PlayerDetails",DIV_ID_STATSPANEL_MATCHSTATS:"Panel_MatchStats",DIV_ID_STATSPANEL_DRAFT:"Panel_Draft",DIV_ID_IFRAME_MATCHSTATS:"IFrame_MatchStats",DIV_ID_VIDEO_IFRAME:"VideoIFrame",STATS_SORTING_KDA:"kda",STATS_SORTING_LHD:"lhd",STATS_SORTING_HEROLEVEL:"hl",STATS_SORTING_XPPERMINUTE:"xppm",STATS_SORTING_CURRENTGOLD:"curgold",STATS_SORTING_NETWORTH:"networth",STATS_SORTING_GOLDPERMINUTE:"gpm",STATS_SORTING_BUYBACKSTATUS:"bb",CHEEER_SEND_INTERVAL:5,CHEEER_GET_INTERVAL:5,CHEER_SHRINK_DELAY:5,CHEER_BAR_COUNT:20,CHEER_STARTING_SCALE_MAX:100,CHEER_RENORMALIZE_FACTOR:1.5,HEALTHBAR_REFRESH_INTERVAL:1/3,GRAPH_REFRESH_INTERVAL:10,POP_ANIMATION_DURATION:200,TOURNAMENT_SCHEDULE_UPDATE_INTERVAL:60,STATS_SORTING_DEFAULT:"kda",NUM_GRAPH_SAMPLES:128,NUM_STAT_LOCATIONS:6,NUM_STAT_LOCATION_TYPES:4,BROWSER_WIDTH_SLIM:1200,MINIMAP_UPDATE_INTERVAL:.1,DATA_CHUNK_TYPES:["match","teams","buildings","graph_data"],ULT_STATUS_NO_ULT:0,ULT_STATUS_ON_COOLDOWN:1,ULT_STATUS_NO_MANA:2,ULT_STATUS_READY:3},ot=function(){};ot.prototype={constructor:ot,ProcessDataReceived:function(t,e){}};var mt=function(){ot.call(this)};mt.prototype=Object.create(ot.prototype),mt.prototype.constructor=mt,mt.prototype.ProcessDataReceived=function(t,e){ot.prototype.ProcessDataReceived.apply(this,arguments);var i=!1;if(B)void 0!==e.matchid&&B&&B.GetMatchID()!==e.matchid&&(i=!0);else{if(void 0===e.matchid)return;i=!0}if(i&&A(e.matchid),B.SetServerSteamID(e.server_steam_id),B.SetBroadcastTime(e.timestamp),B.SetMatchTime(e.game_time),B.SetIsStreamerMode(e.single_team),B.SetCheerPeak(e.cheers_peak),e.time_of_day&&B.SetTimeOfDay(e.time_of_day),y&&st.force_teams&&(e.teamid_radiant=I(rt.TEAM_RADIANT),e.teamid_dire=I(rt.TEAM_DIRE)),void 0!==e.teamid_radiant&&void 0!==e.teamid_dire&&(B.SetTeamID(rt.TEAM_RADIANT,e.teamid_radiant),B.SetTeamID(rt.TEAM_DIRE,e.teamid_dire)),void 0!==e.teamname_radiant&&void 0!==e.teamname_dire&&(B.SetTeamName(rt.TEAM_RADIANT,e.teamname_radiant),B.SetTeamName(rt.TEAM_DIRE,e.teamname_dire)),void 0!==e.picks)for(var n=0;n<e.picks.length;++n){var a=e.picks[n];B.SetPick(n,a.team,a.hero)}if(void 0!==e.bans)for(var n=0;n<e.bans.length;++n){var s=e.bans[n];B.SetBan(n,s.team,s.hero)}void 0!==e.kills&&L.SetKills(e.kills),y&&(e.league_id=rt.LEAGUE_ID_TI5),null===b&&void 0!==e.league_id&&e.league_id>0&&S(e.league_id)};var lt=function(){ot.call(this)};lt.prototype=Object.create(ot.prototype),lt.prototype.constructor=lt,lt.prototype.ProcessDataReceived=function(t,e){ot.prototype.ProcessDataReceived.apply(this,arguments),N.AddMessage(e.channel_id,e.matchtime,e.user,e.message)};var ht=function(){ot.call(this)};ht.prototype=Object.create(ot.prototype),ht.prototype.constructor=ht,ht.prototype.ProcessDataReceived=function(t,e){ot.prototype.ProcessDataReceived.apply(this,arguments);for(var i in e){var n=e[i],a=n.players;if(a&&0!==a.length&&(n.team_number===rt.TEAM_RADIANT||n.team_number==rt.TEAM_DIRE)){(!y||st.cheer_use_stream_values)&&(B.SetTeamScore(n.team_number,n.score),B.SetTeamCheers(n.team_number,n.cheers)),n.only_team&&B.SetStreamerTeam(n.team_number);for(var s=0,r=a.length;r>s;++s){var o=a[s],m=B.GetPlayer(n.team_number,s);m.SetTeam(o.team),o&&o.heroid>0&&(m.SetAccountID(o.accountid),m.SetPlayerID(o.playerid),m.SetHeroID(o.heroid),m.SetLevel(o.level),m.SetRespawnTime(o.respawn_time),m.SetName(o.name),m.SetPosition(o.x,o.y),m.SetHasBuyback(o.has_buyback),m.SetHealthPoints(o.healthpoints),m.SetMaxHealthPoints(o.maxhealthpoints),m.SetHealthRegenRate(o.healthregenrate),m.SetManaPoints(o.manapoints),m.SetMaxManaPoints(o.maxmanapoints),m.SetManaRegenRate(o.manaregenrate),m.SetBaseIntelligence(o.base_intelligence),m.SetBaseAgility(o.base_agility),m.SetBaseStrength(o.base_strength),m.SetBaseDamage(o.base_damage),m.SetBaseMoveSpeed(o.base_movespeed),m.SetBaseArmor(o.base_armor),m.SetIntelligence(o.intelligence),m.SetAgility(o.agility),m.SetStrength(o.strength),m.SetDamage(o.damage),m.SetMoveSpeed(o.movespeed),m.SetArmor(o.armor),m.SetKillCount(o.kill_count),m.SetDeathCount(o.death_count),m.SetAssistsCount(o.assists_count),m.SetGoldPerMinute(o.gold_per_min),m.SetXPPerMinute(o.xp_per_min),m.SetLastHitsCount(o.lh_count),m.SetDeniesCount(o.denies_count),m.SetNetGold(o.net_gold),m.SetHeroDamage(o.hero_damage),m.SetTowerDamage(o.tower_damage),m.SetHealingProvided(o.hero_healing),m.SetGold(o.gold),m.SetUltimateStatus(o.has_ultimate,o.has_ultimate_mana,o.ultimate_cooldown));for(var l in o.items)l>=rt.NUM_ITEM_SLOTS||m.GetItem(l).SetKey(o.items[l]&&0!==o.items[l].id?o.items[l].name.substr(5):null);for(var l in o.stashitems)l>=rt.NUM_ITEM_SLOTS||m.GetStashItem(l).SetKey(o.stashitems[l]&&0!==o.stashitems[l].id?o.stashitems[l].name.substr(5):null);if(void 0!==o.abilities)for(var h=0;h<o.abilities.length;++h)m.SetAbilityLevel(h,o.abilities[h].level);if(void 0!==o.levelpoints)for(var _=0;_<o.levelpoints.length;++_)m.SetLevelPointToAbilities(_+1,o.levelpoints[_].id);if(m.ClearItemShoppingList(),void 0!==o.itemshoppinglist)for(var u=0;u<o.itemshoppinglist.length;++u){var d=o.itemshoppinglist[u];m.AddItemToShoppingList(d.time,d.sold,d.name.substr(5))}if(m.ClearHeroToHeroStats(),void 0!==o.hero_to_hero_stats)for(var c=0,p=o.hero_to_hero_stats.length;p>c;++c){var f=o.hero_to_hero_stats[c];m.SetHeroToHeroStatData(rt.HERO_TO_HERO_KILLS,f.victimid,f.kills),m.SetHeroToHeroStatData(rt.HERO_TO_HERO_ASSISTS,f.victimid,f.assists)}}}}};var _t=function(){ot.call(this)};_t.prototype=Object.create(ot.prototype),_t.prototype.constructor=_t,_t.prototype.ProcessDataReceived=function(t,e){ot.prototype.ProcessDataReceived.apply(this,arguments),B.ClearBuildings();for(var i=0,n=e.length;n>i;++i){var a=e[i],s=B.AddBuilding(a.team,a.lane,a.type,a.tier);s.SetPosition(a.x,a.y),s.SetHeading(a.heading)}};var ut=function(){ot.call(this)};ut.prototype=Object.create(ot.prototype),ut.prototype.constructor=ut,ut.prototype.ProcessDataReceived=function(t,e){ot.prototype.ProcessDataReceived.apply(this,arguments),L.Init(e.graph_gold,e.graph_kill,e.graph_rax,e.graph_tower,e.graph_xp,e.team_loc_stats)};var dt=function(){};dt.prototype.Create=function(t,e){switch(e){case"match":return new mt;case"teams":return new ht;case"buildings":return new _t;case"graph_data":return new ut;case"chat":return new lt}return null};var ct=function(t){this.m_nStreamVersion=t,this.m_ParserFactory=new dt,this.m_Parsers={}};ct.prototype={constructor:ct,ProcessDataReceived:function(t){for(var e=0,i=rt.DATA_CHUNK_TYPES.length;i>e;++e){var n=rt.DATA_CHUNK_TYPES[e];if(void 0!==t[n]&&null!==t[n]){var a=t[n];this.m_Parsers[n]=this.m_Parsers[n]||this.m_ParserFactory.Create(a.version,n),void 0!==this.m_Parsers[n]&&this.m_Parsers[n].ProcessDataReceived(t.game_time,t[n])}}}};var pt=function(){this.m_flMatchStartTime=VUtils.GetTime()-3*Math.random()*60*60,this.m_flStreamStartTime=this.m_flMatchStartTime-3*Math.random()*60*60,this.m_Data={events:[]},this.m_MatchHeroIDs={},this.m_MatchItems={},this.m_MatchStashItems={},this.m_PlayerNames={},this.m_MatchShoppingItems={},this.m_nRadiantTeamID=null,this.m_nDireTeamID=null;for(var t=Object.keys(Y),e=t.length,i=["EricTams","EricL","IceFrog","JonL","Robin","Carorlolf","The O'Roracle","DanielJ","andrewk","BrettS"],n=0,a=[1,11,54,69,74],s=rt.TEAM_RADIANT;s<=rt.TEAM_DIRE;++s){this.m_MatchHeroIDs[s]=[],this.m_MatchItems[s]=[],this.m_MatchStashItems[s]=[],this.m_PlayerNames[s]=[],this.m_MatchShoppingItems[s]=[];for(var r=0;r<rt.PLAYERS_PER_TEAM;++r){var o;a.length?(o=a[0],a.shift()):o=p(),this.m_MatchHeroIDs[s].push(o),this.m_MatchItems[s][r]=[],this.m_MatchStashItems[s][r]=[],this.m_PlayerNames[s].push(i[n++]);for(var m=Math.max(5,parseInt(1e3*Math.random())%rt.NUM_ITEM_SLOTS),l=0;m>l;++l){var h=parseInt(1e3*Math.random())%e;this.m_MatchItems[s][r].push(Y[t[h]].key)}m=Math.max(2,parseInt(1e3*Math.random())%rt.NUM_ITEM_SLOTS);for(var l=0;m>l;++l){var h=parseInt(1e3*Math.random())%e;this.m_MatchStashItems[s][r].push(Y[t[h]].key)}this.m_MatchShoppingItems[s][r]=[];for(var _=17+parseInt(5*Math.random()),u=parseInt(10+60*Math.random()),d=0;_>d;++d){var h=parseInt(1e4*Math.random())%e;this.m_MatchShoppingItems[s][r].push({time:sprintf("%d:%02d",u/60,u%60),sold:Math.random()<.15,id:Y[t[h]].key}),u+=parseInt(d>=6?60*Math.random()*5:2*Math.random())}}}};pt.prototype={constructor:pt,SimulateStream:function(t,e){this.SimualteMatchMetaData(t,e),this.SimulatePlayerData(t,e),this.SimulateBuildingData(t,e)},SimualteMatchMetaData:function(t,e){if(!(void 0!==this.m_flNextMatchMetaDataTime&&t<this.m_flNextMatchMetaDataTime)){var i=5;this.m_nRadiantTeamID=i/2>t%i?1:0,this.m_nDireTeamID=0==this.m_nRadiantTeamID?1:0;for(var n={starttime:this.m_flMatchStartTime,endtime:-1,time:parseInt(3600+t-this.m_flMatchStartTime),teamid_radiant:this.m_nRadiantTeamID,teamid_dire:this.m_nDireTeamID,teamname_radiant:b.GetTeamName(this.m_nRadiantTeamID),teamname_dire:b.GetTeamName(this.m_nDireTeamID),picks:[],bans:[]},a=0;10>a;++a){var s=a%2==0?rt.TEAM_RADIANT:rt.TEAM_DIRE;n.bans.push({team:s,hero:p()}),n.picks.push({team:s,hero:p()})}this.SetChunkData("match",n),this.m_flNextMatchMetaDataTime=t+1}},SimulateChat:function(t,e){void 0!==this.m_flNextChatTime&&t<this.m_flNextChatTime||(this.SetChunkData("chat",{channel_id:1,matchtime:this.GetMatchTime(),user:this.GetRandomChatUser(),message:this.GetRandomChatMessage()}),this.m_flNextChatTime=t+.05+.5*Math.random())},SimulatePlayerData:function(t,e){if(!(void 0!==this.m_flNextPlayerUpdateTime&&t<this.m_flNextPlayerUpdateTime)){for(var i={},n=.009*t,a=rt.TEAM_RADIANT;a<=rt.TEAM_DIRE;++a){i[a]=i[a]||{};for(var s=0;s<rt.PLAYERS_PER_TEAM;++s){var r=.4*Q.noise(100*a+1e3*s+n,100*a+8e3*s+n),o=.4*Q.noise(300*a+3e3*s+n,600*a+5e3*s+n),m=1+2*a*s,l=this.m_MatchHeroIDs[a][s];i[a][s]={heroid:l,alive:!0,has_buyback:Math.random()<.5,x:r,y:o,team:a,healthpoints:parseInt(50*t)%1e3,maxhealthpoints:1e3,healthregenrate:2.23,manapoints:parseInt(50*t)%500,maxmanapoints:500,manaregenrate:5.323,level:m,name:this.m_PlayerNames[a][s],intelligence:10,agility:10,strength:10,damage:10,movespeed:10,armor:10,kill_count:10*(s+1),death_count:1*(s+1),assists_count:10*(s+1),gold_per_min:320*(s+1),xp_per_min:300*(s+1),lh_count:30*(s+1),denies_count:20*(s+1),net_gold:7e3*(s+1),hero_damage:1500*(s+1),tower_damage:300*(s+1),hero_healing:20*(s+1),accountid:100*a+s,gold:parseInt(1e4*Math.random()),items:{},stashitems:{},abilitylevels:[],levelpoints:[],itemshoppinglist:[]};for(var h=0;h<rt.NUM_ITEM_SLOTS;++h)i[a][s].items[h]=this.m_MatchItems[a][s][h],i[a][s].stashitems[h]=this.m_MatchStashItems[a][s][h];for(var _=K[l].abilities.length,u=0;_>u;++u){var d=parseInt(1e3*Math.random())%4;i[a][s].abilitylevels.push(d)}for(var d=1;m>=d;++d){var u=parseInt(1e3*Math.random())%_;void 0===K[l].abilities[u]&&console.log("Debug me: hero ID = "+l+"; ability = "+u),i[a][s].levelpoints.push(K[l].abilities[u].name)}for(var c=this.m_MatchShoppingItems[a][s].length,p=0;c>p;++p)i[a][s].itemshoppinglist.push(this.m_MatchShoppingItems[a][s][p])}}this.SetChunkData("players",i),this.m_flNextPlayerUpdateTime=t+.1+.05*Math.random()}},SimulateBuildingData:function(t,e){if(!(void 0!==this.m_flNextBuildingUpdateTime&&t<this.m_flNextBuildingUpdateTime)){for(var i={},n="tower",a=rt.TEAM_RADIANT;a<=rt.TEAM_DIRE;++a){var s,r=a==rt.TEAM_RADIANT,o=r?1:-1,m=!1;s="mid",this.AddBuildingData(i,a,n,s,1,m,o*-.05,o*-.05,Math.random()),this.AddBuildingData(i,a,n,s,2,m,o*-.2,o*-.2,Math.random()),this.AddBuildingData(i,a,n,s,3,m,o*-.29,o*-.29,Math.random());var s=r?"bottom":"top";this.AddBuildingData(i,a,n,s,1,m,.36*o,o*-.4,Math.random()),this.AddBuildingData(i,a,n,s,2,m,o*-.03,o*-.44,Math.random()),this.AddBuildingData(i,a,n,s,3,m,o*-.23,o*-.42,Math.random()),s=r?"top":"bottom",this.AddBuildingData(i,a,n,s,1,m,o*-.43,.17*o,Math.random()),this.AddBuildingData(i,a,n,s,2,m,o*-.43,o*-.08,Math.random()),this.AddBuildingData(i,a,n,s,3,m,o*-.44,o*-.23,Math.random())}this.SetChunkData("buildings",i),this.m_flNextBuildingUpdateTime=t+.1+.05*Math.random()}},AddBuildingData:function(t,e,i,n,a,s,r,o,m){t[e]=t[e]||[],t[e].push({type:i,lane:n,tier:a,x:r,y:o,destroyed:s,heading:m})},SendChatMessage:function(t,e){var i=this;setTimeout(function(){N.AddMessage(t,i.GetMatchTime(),"Me",e)},300+300*Math.random())},SetChunkData:function(t,e){this.m_Data[t]=e},GetStreamTime:function(){return VUtils.GetTime()-this.m_flStreamStartTime},GetMatchTime:function(){return VUtils.GetTime()-this.m_flMatchStartTime},GetRandomChatUser:function(){var t=["Henrique2511","Edgejob","Jocker","Vinvin510","Tehharness","Barracudathundernuts","Cowara","Lallen7","Ja3491","Q!","sacrito"];return t[parseInt(1e3*Math.random())%t.length]},GetRandomChatMessage:function(){var t=[""],e="";if(Math.random()<.5)for(var i=3+Math.ceil(3*Math.random()),n=0;i>n;++n)e+=this.GetRandomEmoticon();return t[parseInt(1e3*Math.random())%t.length]+e},GetRandomEmoticon:function(){this.rgKeys_=this.rgKeys_||Object.keys(X);var t=this.rgKeys_[parseInt(1e3*Math.random())%this.rgKeys_.length];return":"+X[t].aliases[0]+":"},BShouldTransmit:function(){return!this.m_flNextTransmitTime||VUtils.GetTime()>=this.m_flNextTransmitTime},Transmit:function(t){t.ProcessDataReceived(this.m_Data),this.m_Data.events=[],this.m_flNextTransmitTime+=.1+.15*Math.random()}};var ft=function(){this.$m_Panel=$("#EmoticonsPanel"),this.$m_ImageContainer=$("#EmoticonsPanel_Emoticons"),this.$m_Spinner=this.$m_Panel.find("#EmoticonsPanelSpinner"),this.$m_RefreshButton=this.$m_Panel.find(".RefreshButton"),this.$m_NoEmoticonsMsg=$("#EmoticonsPanel_NoEmoticonsMsg"),this.$m_LoginMsg=$("#EmoticonsPanel_LoginMsg"),this.m_bRequiresUpdate=!0;var t=this;this.$m_RefreshButton.click(function(){t.Refresh()})};ft.prototype={constructor:ft,ToggleVisibility:function(t){this.$m_Panel.hasClass("Hidden")&&(this.$m_Panel.css("left",t.offset().left-this.$m_Panel.width()),this.$m_Panel.css("top",t.offset().top-t.height()-this.$m_Panel.height()-10),this.m_bRequiresUpdate&&this.Refresh()),this.$m_Panel.toggleClass("Hidden")},Hide:function(){this.$m_Panel.addClass("Hidden")},ShowSpinner:function(){this.$m_Spinner.addClass("Loaded_js")},HideSpinner:function(){this.$m_Spinner.removeClass("Loaded_js")},Refresh:function(){this.$m_RefreshButton.hide(),this.$m_ImageContainer.empty(),this.ShowSpinner(),this.$m_NoEmoticonsMsg.hide(),this.$m_LoginMsg.hide();var t=this;$.get(j,function(e){if(t.HideSpinner(),t.$m_RefreshButton.show(),!e.success)return void(void 0!==e.error&&e.error.not_logged_in&&t.$m_LoginMsg.fadeIn());var i=e.access.length;if(i>0){for(var n=0;i>n;++n){var a=e.access[n];if(void 0!==X[a]){var s=X[a],r=new Tt(a),o=r.GetElement();o.attr("alt",s.aliases[0]),t.$m_ImageContainer.append($("<a>").attr("href","javascript:void(0);").data("emoticonid",a).append(o))}}$("#EmoticonsPanel_Emoticons").children().click(function(){var t=$(this).data("emoticonid");N.InsertText(N.GetActiveChannelID(),":"+X[t].aliases[0]+":")})}else t.$m_NoEmoticonsMsg.fadeIn();t.m_bRequiresUpdate=!1})}};var Tt=function(t){this.m_unEmoticonID=t;var e=$("#DummyEmoticon"),i=X[t],n="PlayEmoticonAnimation_"+t+"_"+e.width()+"px",a=e.width()*i.frame_count+"px "+e.height()+"px";this.$m_Element=e.clone().removeAttr("id").css("background-image",'url("'+i.image_url+'")').css("background-size",a).playSpriteSheet(n,i.frame_count*i.ms_per_frame/1e3+"s",-1,$.keyframe.spriteSheet({name:n,rows:1,cols:i.frame_count,width:32*i.frame_count,height:32,offsetX:0,offsetY:0,count:i.frame_count}))};Tt.prototype={constructor:Tt,GetElement:function(){return this.$m_Element},CreateSheetImage:function(){return a(X[this.m_unEmoticonID].image_url)},CreateInfo:function(){return $("<span>").html("FRAMES: "+X[this.m_unEmoticonID].frame_count)}};var gt=function(){this.m_KillData=null,this.m_RaxData=null,this.m_TowerData=null,this.m_GoldData=null,this.m_XPData=null,this.m_rgAllKills=null,this.m_GoldLocationData=null};gt.prototype={Init:function(t,e,i,n,a,s){this.m_KillData=e,this.m_RaxData=i,this.m_TowerData=n,this.m_GoldData=t,this.m_XPData=a,this.m_GoldLocationData=s},SetKills:function(t){this.m_rgAllKills=t},ComposeObjectForGraphSystem:function(){for(var t={kills:[],buildings:[],gold:[],xp:[],radiant_kills:[],dire_kills:[],gold_location:[[],[]],match_time:B.GetMatchTime()},e=0;e<rt.NUM_GRAPH_SAMPLES;++e){t.kills.push(1e3*(this.m_KillData[e]||0)),t.buildings.push(3e3*(this.m_TowerData[e]||0)+5e3*(this.m_RaxData[e]||0)),t.gold.push(this.m_GoldData[e]||0),t.xp.push(this.m_XPData[e]||0);for(var i=rt.TEAM_RADIANT;i<=rt.TEAM_DIRE;++i){for(var n=i==rt.TEAM_RADIANT?0:1,a=[],s=0;s<rt.NUM_STAT_LOCATIONS;++s){for(var r=[],o=0;o<rt.NUM_STAT_LOCATION_TYPES;++o)r.push(this.m_GoldLocationData[n+2*e].loc_stats[s].stats[o]||0);a.push(r)}t.gold_location[n].push(a)}}if(null!==this.m_rgAllKills){for(var m={},i=rt.TEAM_RADIANT;i<=rt.TEAM_DIRE;++i)for(var l=0;l<rt.PLAYERS_PER_TEAM;++l){var h=B.GetPlayer(i,l);m[h.GetPlayerID()]=h}for(var e=0,_=this.m_rgAllKills.length;_>e;++e){var u=this.m_rgAllKills[e].player_id,h=m[u],d={heroid:h.GetHeroID(),time:this.m_rgAllKills[e].death_time};h.GetTeam()===rt.TEAM_RADIANT?t.radiant_kills.push(d):t.dire_kills.push(d)}}return t}};var It=function(){this.$m_Chat=$("#Chat"),this.m_ChannelData={},this.m_EmoticonsPanel=new ft,this.m_ChannelIDs=[],this.m_nActiveChannelID=-1,this.m_cChannels=0,this.m_EmoticonAliasToIDMap={};for(var t in X)for(var e=X[t],i=0;i<e.aliases.length;++i)this.m_EmoticonAliasToIDMap[e.aliases[i]]=t};It.prototype={constructor:It,Init:function(){this.m_nActiveChannelID=1,this.AddChannel(this.m_nActiveChannelID,"All Chat")},Show:function(){this.$m_Chat.removeClass("Transparent")},OnBroadcastIDChanged:function(t){P(this.$m_Chat,V,{msg:"OnVideoIFrameBroadcastIDChanged",broadcastid:t})},GetChannelElement:function(t){return $("#ChatChannel_"+t)},GetActiveChannelID:function(){return this.m_nActiveChannelID},AddChannel:function(t,e){var i=$("#DummyChatChannel").clone().attr("id","ChatChannel_"+t);this.m_ChannelData[t]={display_name:e,elem:i};var n=i.find(".MessageBoxText");n.data("channel_id",t),this.$m_Chat.append(i);var a=this;return n.focus(function(){a.ClearActiveChannelTextIfDefault()}).blur(function(){var t=$(this);t.val().length||t.val(t.data("defaulttext"))}).keypress(function(t){if(13==t.which){var e=$(this);a.SendMessage(e.data("channel_id"),e.val()),e.val(""),t.preventDefault()}}).click(function(){a.m_EmoticonsPanel.Hide()}),i.find(".EmoticonsButton").click(function(){a.m_EmoticonsPanel.ToggleVisibility($(this))}),this.m_ChannelIDs.push(this.m_cChannels++)},SendMessage:function(t,e){w.SendChatMessage(t,e)},GetActiveChannelTextAreaElement:function(){return this.GetChannelElement(this.GetActiveChannelID()).find(".MessageBoxText")},InsertText:function(t,i){this.ClearActiveChannelTextIfDefault();var n=this.GetActiveChannelTextAreaElement(),a=n.prop("selectionStart");if(a){var s=n.val();n.val(s.substring(0,a)+i+s.substring(a));var r=a+i.length;e(n[0],r,r)}else n.val(i)},ClearActiveChannelTextIfDefault:function(){var t=this.GetActiveChannelTextAreaElement();t.data("defaulttext")===t.val()&&t.val("")},ReplaceEmoticonAliases:function(t){if(-1===t.indexOf(":"))return t;var e=0,i=10,n=t;for(var a in this.m_EmoticonAliasToIDMap){do{var s=":"+a+":";if(-1===n.indexOf(s))break;var r='<div class="Emoticon" data-emoticonid="'+this.m_EmoticonAliasToIDMap[a]+'"></div>';n=n.replace(s,r),++e}while(i>e);if(e>=i)break}return n},AddMessage:function(t,e,i,n){var a=this.GetChannelData(t),s=a.elem.find(".MessageList"),r=$("#DummyChatMessage"),o=r.clone().removeAttr("id");o.find(".Timestamp").html(VUtils.FormatTimestamp(e)),o.find(".Username").html(i+":"),o.html(o.html()+this.ReplaceEmoticonAliases(n)),o.find("div").each(function(){var t=$(this),e=t.data("emoticonid");if(void 0!==e){var i=new Tt(e);t.append(i.GetElement())}}),o.appendTo(s);var m=a.elem.find(".Messages");m.scrollTop(m[0].scrollHeight);var l=200,h=s.children().length;h>=l&&s.children().filter(":lt("+(h-l)+")").remove()},GetChannelData:function(t){return this.m_ChannelData[t]}};var Pt=function(){this.m_nX=null,this.m_nY=null,this.m_nW=null,this.m_nH=null};Pt.prototype={constructor:Pt,Set:function(t,e,i,n){this.m_nX=t,this.m_nY=e,this.m_nW=i,this.m_nH=n},X:function(){return this.m_nX},Y:function(){return this.m_nY},W:function(){return this.m_nW},H:function(){return this.m_nH},BIsPointInRect:function(t,e){return t>=this.m_nX&&t<=this.m_nX+this.m_nW&&e>=this.m_nY&&e<=this.m_nY+this.m_nH}};var At=function(){this.$m_Minimap=$("#Minimap"),this.$m_Canvas=$("#MinimapCanvas"),this.$m_TempCanvas=$("#MinimapCanvas_Temp"),this.$m_Background=this.$m_Minimap.find(".Background"),this.m_flMinimapScale=null,this.m_flMinimapWidth=null,this.m_flMinimapHeight=null,this.$m_TowerImages={},this.$m_BarracksImages={},this.$m_AncientImage={},this.m_flInitTime=-1,this.m_Data={heroes:{},buildings:{}},this.m_Data.heroes[rt.TEAM_RADIANT]={},this.m_Data.heroes[rt.TEAM_DIRE]={},this.$m_HeroImages={},this.m_HeroBoxes={};for(var t=rt.TEAM_RADIANT;t<=rt.TEAM_DIRE;++t){this.$m_HeroImages[t]=[],this.m_HeroBoxes[t]=[];for(var e=0;e<rt.PLAYERS_PER_TEAM;++e)this.$m_HeroImages[t].push($("#DummyMiniHeroImage").clone().attr("id","#MinimapMiniHero_"+t+"_"+e)),this.m_HeroBoxes[t].push(new Pt);var i=c(t),n=$("#"+i+"MinimapTower"),a=$("#"+i+"MinimapTowerAngled"),s=$("#"+i+"MinimapBarracks"),r=$("#"+i+"MinimapBarracksAngled"),o=$("#"+i+"MinimapAncient");this.$m_TowerImages[t]={},this.$m_TowerImages[t][rt.DOTA_LANE_TOP]=n,this.$m_TowerImages[t][rt.DOTA_LANE_MIDDLE]=a,this.$m_TowerImages[t][rt.DOTA_LANE_BOTTOM]=n,this.$m_BarracksImages[t]={},this.$m_BarracksImages[t][rt.DOTA_LANE_TOP]=s,this.$m_BarracksImages[t][rt.DOTA_LANE_MIDDLE]=r,this.$m_BarracksImages[t][rt.DOTA_LANE_BOTTOM]=s,this.$m_AncientImage[t]=o}this.m_MouseHoverHeroData=null,this.m_nHeroIconSize=null,this.m_flNextRenderTime=0};At.prototype={constructor:At,Init:function(){this.SetupMouseHandlers();var t=this;r(this.$m_Background,function(e){i(t.$m_Minimap)})},X_:function(t){return 1.1*(-25*this.m_flMinimapScale+VUtils.Lerp(.5+t,0,this.m_flMinimapWidth))},Y_:function(t){return 1.1*(-8*this.m_flMinimapScale+VUtils.Lerp(.5+t,this.m_flMinimapHeight,0))},SetupMouseHandlers:function(){var t=this;this.$m_Minimap.click(function(){null!==t.m_MouseHoverHeroData&&O.ShowPlayerDetailsPanel(t.m_MouseHoverHeroData.team,t.m_MouseHoverHeroData.player_index)}).mousemove(function(e){for(var i=e.pageX-$(this).offset().left,n=e.pageY-$(this).offset().top,a=null,s=Number.MAX_VALUE,r=rt.TEAM_RADIANT;r<=rt.TEAM_DIRE;++r)for(var o=0;o<rt.PLAYERS_PER_TEAM;++o){var m=t.m_HeroBoxes[r][o];if(m.BIsPointInRect(i,n)){var l=i-m.X(),h=n-m.Y(),_=l*l+h*h;s>_&&(a={team:r,player_index:o})}}return a?(t.m_MouseHoverHeroData=a,void $(this).addClass("PointerCursor")):(t.m_MouseHoverHeroData=null,void $(this).removeClass("PointerCursor"))})},RenderBuilding_:function(t,e){this.rgPos_=this.rgPos_||[null,null],t.GetPosition(this.rgPos_);var i=this.X_(this.rgPos_[0]),n=this.Y_(this.rgPos_[1]),a=7;e.save(),e.translate(i,n);var s=t.GetType(),r=t.GetTeam(),o=t.GetLane(),m=null,l=1;switch(s){case 0:m=this.$m_TowerImages[r][o];break;case 1:m=this.$m_BarracksImages[r][o];break;case 2:l=2,m=this.$m_AncientImage[r];break;default:VUtils.AssertMsg(0,"Invalid building type "+s)}var a=l*this.m_nBuildingSize,h=.5*-a;m&&e.drawImage(m[0],h,h,a,a),e.restore()},BShouldUpdate:function(t){return 0===this.m_flNextRenderTime||this.m_flNextRenderTime<=t},Think:function(t,e){for(var i=[null,null],n=rt.TEAM_RADIANT;n<=rt.TEAM_DIRE;++n)for(var a=(n==rt.TEAM_RADIANT,0);a<rt.PLAYERS_PER_TEAM;++a){var s=B.GetPlayer(n,a);if(s.BIsValid()){var r=this.$m_HeroImages[n][a],o=r.attr("src"),l=r.data("heroid"),h=s.GetHeroID(),_=!l||l!==h;if(o&&o.length&&!_||r.attr("src",m(h)).data("heroid",h),s.BIsAlive()&&s.BIsValid()){var u=this.$m_HeroImages[n][a][0];if(u.complete){s.GetPosition(i);var d=this.X_(i[0]),c=this.Y_(i[1]),p=this.m_nHeroIconSize;this.m_HeroBoxes[n][a].Set(d,c,p,p)}}}}this.m_flNextRenderTime=t+rt.MINIMAP_UPDATE_INTERVAL},Render:function(){var t=this.$m_Canvas[0],e=t.getContext("2d"),i=this.$m_TempCanvas[0],n=i.getContext("2d"),a="#414142";e.clearRect(0,0,t.width,t.height);var s=B.GetBuildings();for(var r in s){var o=s[r];e.beginPath(),this.RenderBuilding_(o,e),e.fillStyle=o.destroyed?a:o.team==rt.TEAM_RADIANT?rt.COLOR_RADIANT:rt.COLOR_DIRE,e.closePath(),e.fill()}for(var m=rt.TEAM_RADIANT;m<=rt.TEAM_DIRE;++m)for(var l=m==rt.TEAM_RADIANT,h=0;h<rt.PLAYERS_PER_TEAM;++h){var _=B.GetPlayer(m,h);if(_.BIsAlive()&&_.BIsValid()){var u=this.$m_HeroImages[m][h][0];if(u.complete){var d=this.m_MouseHoverHeroData&&this.m_MouseHoverHeroData.team===m&&this.m_MouseHoverHeroData.player_index===h;n.save(),n.fillStyle=d?rt.COLOR_MINIMAP_HOVER_STROKE:l?rt.COLOR_RADIANT:rt.COLOR_DIRE,n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-atop",n.drawImage(u,0,0,i.width,i.height),n.restore(),e.globalAlpha=1;var c=this.m_HeroBoxes[m][h],p=c.W(),f=1.2*p,T=.5*(f-p),g=.5*p;e.drawImage(i,c.X()-T-g,c.Y()-T-g,f,f),e.drawImage(u,c.X()-g,c.Y()-g,c.W(),c.H())}}}},OnWindowResize:function(){this.m_flMinimapWidth=this.$m_Minimap.width(),this.m_flMinimapHeight=this.m_flMinimapWidth,this.m_flMinimapScale=this.m_flMinimapWidth/400,this.$m_Canvas.attr("width",this.m_flMinimapWidth).attr("height",this.m_flMinimapWidth),this.$m_TempCanvas.attr("width",parseInt(this.$m_Minimap.width()/10)).attr("height",parseInt(this.$m_Minimap.height()/10)),this.m_nHeroIconSize=parseInt(this.$m_Minimap.width()/12),this.m_nBuildingSize=parseInt(this.m_nHeroIconSize/2)}};var St=function(){this.m_strKey=null};St.prototype={constructor:St,SetKey:function(t){this.m_strKey=t},GetKey:function(){return this.m_strKey},ClearItem:function(){this.m_strKey=null}};var vt=function(t,e,i){this.m_strTime=VUtils.FormatTimestamp(t),this.m_bSold=e,this.m_nItemID=i};vt.prototype={constructor:vt,GetTime:function(){return this.m_strTime},BWasSold:function(){return this.m_bSold},GetItemID:function(){return this.m_nItemID}};var Dt=function(t){this.m_iPlayer=t,this.m_nPlayerID=null,this.m_nTeam=null,this.m_nHeroID=null,this.m_nLevel=null,this.m_strName=null,this.m_unAccountID=null,this.m_rgHealthPoints=new Float32Array(2),this.m_nMaxHealthPoints=null,this.m_flHealthRegenRate=null,this.m_rgManaPoints=new Float32Array(2),this.m_nMaxManaPoints=null,this.m_flManaRegenRate=null,this.m_nRespawnTime=null,this.m_bHasBuyback=null,this.m_nBaseIntelligence=null,this.m_nBaseAgility=null,this.m_nBaseStrength=null,this.m_nBaseDamage=null,this.m_nBaseMoveSpeed=null,this.m_nBaseArmor=null,this.m_nIntelligence=null,this.m_nAgility=null,this.m_nStrength=null,this.m_nDamage=null,this.m_nMoveSpeed=null,this.m_nArmor=null,this.m_cKills=null,this.m_cDeaths=null,this.m_nGoldPerMin=null,this.m_nXPPerMin=null,this.m_cLastHits=null,this.m_cDenies=null,this.m_nNetGold=null,this.m_nHeroDamage=null,this.m_nTowerDamage=null,this.m_nHealingProvided=null,this.m_bHasUlt=null,this.m_bHasUltMana=null,this.m_nUltCooldown=null,this.m_rgPos=[new Float32Array(2),new Float32Array(2)],this.m_rgItems=[],this.m_rgStashItems=[];for(var e=0;e<rt.NUM_ITEM_SLOTS;++e)this.m_rgItems.push(new St),
this.m_rgStashItems.push(new St);this.m_rgAbilityLevels=[];for(var i=0;i<rt.MAX_HERO_ABILITIES_INCLUDING_ATTRIBUTE_BONUS;++i)this.m_rgAbilityLevels.push(null);this.m_rgLevelPoints=[];for(var n=0;n<rt.MAX_HERO_LEVELS;++n)this.m_rgLevelPoints.push(null)};Dt.prototype={constructor:Dt,BIsValid:function(){return null!==this.m_nPlayerID&&null!==this.m_nTeam&&null!==this.m_nHeroID&&null!==this.m_nLevel&&null!==this.m_strName&&null!==this.m_unAccountID&&null!==this.m_nMaxHealthPoints&&null!==this.m_flHealthRegenRate&&null!==this.m_nMaxManaPoints&&null!==this.m_flManaRegenRate&&null!==this.m_bHasBuyback&&null!==this.m_nBaseIntelligence&&null!==this.m_nBaseAgility&&null!==this.m_nBaseStrength&&null!==this.m_nBaseDamage&&null!==this.m_nBaseMoveSpeed&&null!==this.m_nBaseArmor&&null!==this.m_nIntelligence&&null!==this.m_nAgility&&null!==this.m_nStrength&&null!==this.m_nDamage&&null!==this.m_nMoveSpeed&&null!==this.m_nArmor&&null!==this.m_cKills&&null!==this.m_cDeaths&&null!==this.m_nGoldPerMin&&null!==this.m_nXPPerMin&&null!==this.m_cLastHits&&null!==this.m_cDenies&&null!==this.m_nNetGold&&null!==this.m_nHeroDamage&&null!==this.m_nTowerDamage&&null!==this.m_nHealingProvided&&null!==this.m_bHasUlt&&null!==this.m_bHasUltMana&&null!==this.m_nUltCooldown&&null!==this.m_rgPos[0][0]&&null!==this.m_rgPos[1][0]&&null!==this.m_rgPos[0][1]&&null!==this.m_rgPos[1][1]},SetPlayerID:function(t){this.m_nPlayerID=t},GetPlayerID:function(){return this.m_nPlayerID},SetTeam:function(t){this.m_nTeam=t},GetTeam:function(){return this.m_nTeam},SetLevel:function(t){this.m_nLevel=t},GetLevel:function(){return this.m_nLevel},SetName:function(t){this.m_strName=t},GetName:function(){return this.m_strName},SetAccountID:function(t){this.m_unAccountID=t},GetAccountID:function(){return this.m_unAccountID},SetHealthPoints:function(t){this.m_rgHealthPoints[1]=t,0===this.m_rgHealthPoints[0]&&(this.m_rgHealthPoints[0]=t)},GetHealthPoints:function(){return this.m_rgHealthPoints[0]},SetMaxHealthPoints:function(t){this.m_nMaxHealthPoints=t},GetMaxHealthPoints:function(){return this.m_nMaxHealthPoints},SetHealthRegenRate:function(t){this.m_flHealthRegenRate=t},GetHealthRegenRate:function(){return this.m_flHealthRegenRate},GetHealthPointsPercent:function(){return 100*this.GetHealthPoints()/this.m_nMaxHealthPoints},SetManaPoints:function(t){this.m_rgManaPoints[1]=t},GetManaPoints:function(){return this.m_rgManaPoints[0]},SetMaxManaPoints:function(t){this.m_nMaxManaPoints=t},GetMaxManaPoints:function(){return this.m_nMaxManaPoints},SetManaRegenRate:function(t){this.m_flManaRegenRate=t},GetManaRegenRate:function(){return this.m_flManaRegenRate},GetManaPointsPercent:function(){return 100*this.m_rgManaPoints[0]/this.m_nMaxManaPoints},BHasBuyback:function(){return this.m_bHasBuyback},SetHasBuyback:function(t){this.m_bHasBuyback=t},BIsAlive:function(){return void 0===this.m_nRespawnTime||0===this.m_nRespawnTime},GetRespawnTime:function(){return this.m_nRespawnTime},SetRespawnTime:function(t){this.m_nRespawnTime=t},GetHeroID:function(){return this.m_nHeroID},BHasHero:function(){return o(this.m_nHeroID)},SetHeroID:function(t){VUtils.Assert(t>0),this.m_nHeroID=t},GetBaseIntelligence:function(){return this.m_nBaseIntelligence},GetBaseAgility:function(){return this.m_nBaseAgility},GetBaseStrength:function(){return this.m_nBaseStrength},GetBaseDamage:function(){return this.m_nBaseDamage},GetBaseMoveSpeed:function(){return this.m_nBaseMoveSpeed},GetBaseArmor:function(){return this.m_nBaseArmor},GetIntelligence:function(){return this.m_nIntelligence},GetAgility:function(){return this.m_nAgility},GetStrength:function(){return this.m_nStrength},GetDamage:function(){return this.m_nDamage},GetMoveSpeed:function(){return this.m_nMoveSpeed},GetArmor:function(){return this.m_nArmor},SetBaseIntelligence:function(t){this.m_nBaseIntelligence=t},SetBaseAgility:function(t){this.m_nBaseAgility=t},SetBaseStrength:function(t){this.m_nBaseStrength=t},SetBaseDamage:function(t){this.m_nBaseDamage=t},SetBaseMoveSpeed:function(t){this.m_nBaseMoveSpeed=t},SetBaseArmor:function(t){this.m_nBaseArmor=t},SetIntelligence:function(t){this.m_nIntelligence=t},SetAgility:function(t){this.m_nAgility=t},SetStrength:function(t){this.m_nStrength=t},SetDamage:function(t){this.m_nDamage=t},SetMoveSpeed:function(t){this.m_nMoveSpeed=t},SetArmor:function(t){this.m_nArmor=t},GetPosition:function(t){t[0]=this.m_rgPos[0][0],t[1]=this.m_rgPos[1][0]},SetPosition:function(t,e){this.m_rgPos[0][1]=t,this.m_rgPos[1][1]=e,(null===this.m_rgPos[0][0]||null===this.m_rgPos[1][0])&&(this.m_rgPos[0][0]=t,this.m_rgPos[1][0]=e)},GetHeroBaseAttributeValue:function(t){switch(t){case"str":return this.GetBaseStrength();case"int":return this.GetBaseIntelligence();case"agi":return this.GetBaseAgility();case"attack":return this.GetBaseDamage();case"speed":return this.GetBaseMoveSpeed();case"defense":return this.GetBaseArmor()}return VUtils.AssertMsg(!1,"Should never get here"),0},GetHeroBonusAttributeValue:function(t){switch(t){case"str":return this.GetStrength()-this.GetBaseStrength();case"int":return this.GetIntelligence()-this.GetBaseIntelligence();case"agi":return this.GetAgility()-this.GetBaseAgility();case"attack":return this.GetDamage()-this.GetBaseDamage();case"speed":return this.GetMoveSpeed()-this.GetBaseMoveSpeed();case"defense":return this.GetArmor()-this.GetBaseArmor()}return VUtils.AssertMsg(!1,"Should never get here"),0},GetAbilityLevel:function(t){return this.m_rgAbilityLevels[t]},SetAbilityLevel:function(t,e){this.m_rgAbilityLevels[t]=e},GetKillCount:function(){return this.m_cKills},SetKillCount:function(t){this.m_cKills=t},GetDeathCount:function(){return this.m_cDeaths},SetDeathCount:function(t){this.m_cDeaths=t},GetAssistsCount:function(){return this.m_cAssists},SetAssistsCount:function(t){this.m_cAssists=t},SetGold:function(t){this.m_nGold=t},GetGold:function(){return this.m_nGold},GetGoldPerMinute:function(){return this.m_nGoldPerMin},SetGoldPerMinute:function(t){this.m_nGoldPerMin=t},GetXPPerMinute:function(){return this.m_nXPPerMin},SetXPPerMinute:function(t){this.m_nXPPerMin=t},GetLastHitsCount:function(){return this.m_cLastHits},SetLastHitsCount:function(t){this.m_cLastHits=t},GetDeniesCount:function(){return this.m_cDenies},SetDeniesCount:function(t){this.m_cDenies=t},GetNetGold:function(){return this.m_nNetGold},SetNetGold:function(t){this.m_nNetGold=t},GetHeroDamage:function(){return this.m_nHeroDamage},SetHeroDamage:function(t){this.m_nHeroDamage=t},GetTowerDamage:function(){return this.m_nTowerDamage},SetTowerDamage:function(t){this.m_nTowerDamage=t},GetHealingProvided:function(){return this.m_nHealingProvided},SetHealingProvided:function(t){this.m_nHealingProvided=t},BHasUlt:function(){return this.m_bHasUlt},BHasEnoughManaForUlt:function(){return this.m_bHasUltMana},GetUltCooldown:function(){return this.m_nUltCooldown},SetUltimateStatus:function(t,e,i){this.m_bHasUlt=t,this.m_bHasUltMana=e,this.m_nUltCooldown=i},GetLevelPointCount:function(){return this.m_rgLevelPoints.length},GetLevelPointAbilities:function(t){return this.m_rgLevelPoints[t-1]},SetLevelPointToAbilities:function(t,e){this.m_rgLevelPoints[t-1]=e},GetItem:function(t){return this.m_rgItems[t]},GetStashItem:function(t){return this.m_rgStashItems[t]},ClearItemShoppingList:function(){this.m_rgShoppingList=[]},AddItemToShoppingList:function(t,e,i){this.m_rgShoppingList.push(new vt(t,e,i))},GetShoppingListCount:function(){return this.m_rgShoppingList.length},GetShoppingListItemAtIndex:function(t){return this.m_rgShoppingList[t]},ClearHeroToHeroStats:function(){this.m_HeroToHeroStats={};for(var t=0;t<rt.HERO_TO_HERO_TYPE_COUNT;++t)this.m_HeroToHeroStats[t]={}},SetHeroToHeroStatData:function(t,e,i){this.m_HeroToHeroStats[t][e]=i},GetHeroToHeroStatData:function(t,e){return void 0===this.m_HeroToHeroStats[t][e]?0:this.m_HeroToHeroStats[t][e]},GetKillCountOnEnemyPlayer:function(t){return this.GetHeroToHeroStatData(rt.HERO_TO_HERO_KILLS,t)},GetAssistedKillCountOnEnemyPlayer:function(t){return this.GetHeroToHeroStatData(rt.HERO_TO_HERO_ASSISTS,t)},GetHeroName:function(){return T(this.m_nHeroID)},GetAbilityCount:function(){return VUtils.Assert(o(this.m_nHeroID)),K[this.m_nHeroID].abilities.length},GetAbilityName:function(t){return z[this.m_nHeroID].abilities[t].name},GetAbilityImageURL:function(t){return F+K[this.m_nHeroID].abilities[t].relative_image_url},GetAbilityID:function(t){return K[this.m_nHeroID].abilities[t].id},GetAbilityNameInternal:function(t){return K[this.m_nHeroID].abilities[t].name},GetMaxAbilityLevel:function(t){return K[this.m_nHeroID].abilities[t].maxlevel},GetAbilityManaCostForLevel:function(t,e){return void 0===K[this.m_nHeroID].abilities[t].manacosts[e]?0:parseInt(K[this.m_nHeroID].abilities[t].manacosts[e])},GetHeroPrimaryAttribute:function(){return K[this.m_nHeroID].attrgroup},Think:function(t){if(this.BIsValid()){var e=20*t;this.m_rgPos[0][0]=VUtils.LerpClamped(e,this.m_rgPos[0][0],this.m_rgPos[0][1]),this.m_rgPos[1][0]=VUtils.LerpClamped(e,this.m_rgPos[1][0],this.m_rgPos[1][1]),this.m_rgHealthPoints[0]=VUtils.LerpClamped(e,this.m_rgHealthPoints[0],this.m_rgHealthPoints[1]),this.m_rgManaPoints[0]=VUtils.LerpClamped(e,this.m_rgManaPoints[0],this.m_rgManaPoints[1])}}};var $t=function(t,e,i,n){this.m_nTeam=t,this.m_nLane=e,this.m_strType=i,this.m_nTier=n,this.m_rgPos=[null,null],this.m_flHeading=null};$t.prototype={GetPosition:function(t){t[0]=this.m_rgPos[0],t[1]=this.m_rgPos[1]},SetPosition:function(t,e){this.m_rgPos[0]=t,this.m_rgPos[1]=e},GetType:function(){return this.m_strType},GetLane:function(){return this.m_nLane},BIsDestroyed:function(){return this.m_bIsDestroyed},GetHeading:function(){return this.m_flHeading},SetHeading:function(t){this.m_flHeading=t},GetTeam:function(){return this.m_nTeam}};var yt=function(t,e,i){this.m_nTeam=t,this.m_bPick=e,this.m_nHeroID=i};yt.prototype={constructor:yt,GetTeam:function(){return this.m_nTeam},BIsPick:function(){return this.m_bPick},GetHeroID:function(){return this.m_nHeroID}};var Mt=function(){this.m_unPrizePool=null,this.m_unLeagueID=null,this.m_strTournamentName=null,this.m_rgLogoImageURLs=null};Mt.prototype={constructor:Mt,Init:function(t,e){this.m_unLeagueID=t,this.m_strTournamentName=e.name,this.m_rgLogoImageURLs=e.logos,this.m_rgTeamData=e.teams,O.ShowTournamentPanels(!0)},GetLeagueID:function(){return this.m_unLeagueID},GetTeamLogoURL:function(t,e){return VUtils.Assert(void 0!==this.m_rgTeamData[t]&&void 0!==this.m_rgTeamData[t].team_logo_small&&void 0!==this.m_rgTeamData[t].team_logo_large),e?this.m_rgTeamData[t].team_logo_small:this.m_rgTeamData[t].team_logo_large},GetTeamName:function(t){return VUtils.Assert(void 0!==this.m_rgTeamData[t]&&void 0!==this.m_rgTeamData[t].name),this.m_rgTeamData[t].name},GetLogoImageURLs:function(){return this.m_rgLogoImageURLs},GetTeamPrimaryColor:function(t){return this.m_rgTeamData[t].primary_color},Think:function(t,e){return E?void this.Simulate(t,e):void 0},Simulate:function(t,e){void 0!==this.m_flNextSimulateTime&&t<this.m_flNextSimulateTime||(this.m_unViewerCount=parseInt(t),this.m_unPrizePool=16e5+parseInt(100*t),this.m_flNextTournamentDataTime=t+1)}};var Rt=function(t){this.m_strMatchID=t,this.m_flMatchTime=null,this.m_bIsStreamerMode=null,this.m_nStreamerTeam=null,this.m_rgBans=[],this.m_rgPicks=[],this.m_rgBuildings=[],this.m_TeamIDs={},this.m_TeamIDs[rt.TEAM_RADIANT]=null,this.m_TeamIDs[rt.TEAM_DIRE]=null,this.m_TeamNames={},this.m_TeamNames[rt.TEAM_RADIANT]=null,this.m_TeamNames[rt.TEAM_DIRE]=null,this.m_Players={},this.m_Players[rt.TEAM_RADIANT]={},this.m_Players[rt.TEAM_DIRE]={},this.m_TeamCheers={},this.m_cCheerPeak=null,this.m_cCheerScaleMax=rt.CHEER_STARTING_SCALE_MAX;for(var e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e){this.m_TeamCheers[e]=0;for(var i=0;i<rt.PLAYERS_PER_TEAM;++i)this.m_Players[e][i]=new Dt(i)}this.m_TeamScores={},this.m_TeamScores[rt.TEAM_RADIANT]=null,this.m_TeamScores[rt.TEAM_DIRE]=null,this.m_strServerSteamID=null,this.m_flBroadcastTime=null,this.m_flTimeOfDay=null};Rt.prototype={constructor:Rt,Init:function(){},BIsStreamerMode:function(){return this.m_bIsStreamerMode},SetIsStreamerMode:function(t){this.m_bIsStreamerMode=t},BIsStreamerTeam:function(t){return this.m_nStreamerTeam===t},SetStreamerTeam:function(t){this.m_nStreamerTeam=t},GetPlayer:function(t,e){return VUtils.Assert(void 0!==t),VUtils.Assert(void 0!==e),VUtils.Assert(void 0!==this.m_Players[t]),VUtils.Assert(void 0!==this.m_Players[t][e]),this.m_Players[t][e]},BAllPlayersHaveHeroes:function(){for(var t=rt.TEAM_RADIANT;t<=rt.TEAM_DIRE;++t)for(var e=0;e<rt.PLAYERS_PER_TEAM;++e){var i=this.GetPlayer(t,e);if(!i||!i.BHasHero())return!1}return!0},ClearBuildings:function(){this.m_rgBuildings=[]},GetBuildings:function(){return this.m_rgBuildings},AddBuilding:function(t,e,i,n){VUtils.Assert(void 0!==t),VUtils.Assert(void 0!==i),VUtils.Assert(void 0!==e),VUtils.Assert(void 0!==n);var a=new $t(t,e,i,n);return this.m_rgBuildings.push(a),a},GetMatchTime:function(){return this.m_flMatchTime},SetMatchTime:function(t){this.m_flMatchTime=t},SetTeamName:function(t,e){this.m_TeamNames[t]!==e&&(this.m_TeamNames[t]=e,O.OnTeamNameChanged(t,e))},SetTeamScore:function(t,e){this.m_TeamScores[t]=e},SetTeamCheers:function(t,e){this.m_TeamCheers[t]=e},GetTeamCheers:function(t){return this.m_TeamCheers[t]},GetCheerPeak:function(){return this.m_cCheerPeak},SetCheerPeak:function(t){this.m_cCheerPeak=t,t>=this.m_cCheerScaleMax&&(this.m_cCheerScaleMax=rt.CHEER_RENORMALIZE_FACTOR*t)},GetCheerScaleMax:function(){return this.m_cCheerScaleMax},GetServerSteamID:function(){return this.m_strServerSteamID},SetServerSteamID:function(t){this.m_strServerSteamID=t},GetMatchID:function(){return this.m_strMatchID},GetBroadcastTime:function(){return this.m_flBroadcastTime},SetBroadcastTime:function(t){this.m_flBroadcastTime=t},SetTimeOfDay:function(t){VUtils.Assert(t>=0&&1>=t),this.m_flTimeOfDay=t},GetTimeOfDay:function(){return this.m_flTimeOfDay},GetTeamID:function(t){return this.m_TeamIDs[t]},SetTeamID:function(t,e){b&&this.m_TeamIDs[t]!==e&&(this.m_TeamIDs[t]=e,O.OnTeamIDChanged(t,e))},GetTeamName:function(t){return this.m_TeamNames[t]},GetPicks:function(){return this.m_rgPicks},SetPick:function(t,e,i){t<this.m_rgPicks.length||this.m_rgPicks.push(new yt(e,!0,i))},GetBans:function(){return this.m_rgBans},SetBan:function(t,e,i){t<this.m_rgBans.length||this.m_rgBans.push(new yt(e,!0,i))},GetTeamScore:function(t){return this.m_TeamScores[t]},Think:function(t,e){for(var i=rt.TEAM_RADIANT;i<=rt.TEAM_DIRE;++i)for(var n=0;n<rt.PLAYERS_PER_TEAM;++n)this.GetPlayer(i,n).Think(e)}};var Ct=function(t){this.$m_Panel=t.panel,this.$m_Progress=this.$m_Panel.find(".HealthBarProgress"),this.$m_Points=t.current_points_panel,this.$m_MaxPoints=t.max_points_panel,this.$m_PointsSplitter=t.points_splitter_panel,this.$m_RegenRate=t.regen_rate_panel,this.$m_LeftmostText=this.$m_Panel.find(".LeftmostText"),this.m_nCurrentPercentageValue=null,this.m_nCurrentPointValue=null,this.m_rgTextElements=[this.$m_Points,this.$m_MaxPoints,this.$m_PointsSplitter,this.$m_RegenRate],this.m_bIsHealthBar=t.is_health_bar,this.m_nTeam=null,this.m_flNextUpdateTime=0};Ct.prototype={constructor:Ct,SetTeam:function(t){if(this.m_nTeam!=t&&this.m_bIsHealthBar){this.m_nTeam=t;var e=rt.TEAM_RADIANT==t,i=$("#DummyColors_js").find(e?".Radiant":".Dire"),n=i.css("color");this.$m_Panel.css("border-color",i.css("border-top-color")),this.$m_Points.css("color",n),this.$m_PointsSplitter&&this.$m_PointsSplitter.css("color",n),this.$m_MaxPoints&&this.$m_MaxPoints.css("color",n),this.$m_LeftmostText&&this.$m_LeftmostText.css("color",i.css("background-color")),this.$m_RegenRate&&this.$m_RegenRate.css("color",n),e?(this.$m_Progress.removeClass("RedRadialGradient"),this.$m_Progress.addClass("GreenRadialGradient")):(this.$m_Progress.removeClass("GreenRadialGradient"),this.$m_Progress.addClass("RedRadialGradient"))}},Update:function(t){var e=VUtils.GetTime();if(!(0!==this.m_flNextUpdateTIme&&this.m_flNextUpdateTime>e)){var i,n,a,s;this.m_bIsHealthBar?(i=t.GetHealthPointsPercent(),n=t.GetHealthPoints(),a=t.GetMaxHealthPoints(),s=t.GetHealthRegenRate()):(i=t.GetManaPointsPercent(),n=t.GetManaPoints(),a=t.GetMaxManaPoints(),s=t.GetManaRegenRate()),n=parseInt(n),this.m_nCurrentPercentageValue!=i&&(this.$m_Progress.css("width",i+"%"),this.m_nCurrentPercentageValue=i),this.m_nCurrentPointValue!=n&&(this.$m_Points.html(n),this.m_nCurrentPointValue=n),this.$m_MaxPoints&&this.$m_MaxPoints.html(parseInt(a)),this.$m_RegenRate&&this.$m_RegenRate.html("+"+sprintf("%.1f",s));for(var r=0,o=this.m_rgTextElements.length;o>r;++r)this.m_rgTextElements[r]&&this.m_rgTextElements[r].css("line-height",this.$m_Panel.outerHeight()+"px");this.m_flNextUpdateTime=e+rt.HEALTHBAR_REFRESH_INTERVAL}}};var Et=function(t,e){this.$m_Panel=$(t),VUtils.Assert(this.$m_Panel.length),this.m_PanelGroup=e,this.$m_LoadedContent=this.$m_Panel.find(".Content"),this.m_nAnimDuration=650,this.m_bDirty=!1,this.m_flNextUpdateTime=0,this.m_bWaitingForData=null,this.$m_LoadingContainer=$("<div>").addClass("LoadingContainer"),this.$m_LoadingContainer.insertBefore(this.$m_LoadedContent),this.$m_WaitingPanel=$("<div>").addClass("WaitingPanel").addClass("FadeAnimation").append($("<div>")),this.$m_LoadingContainer.append(this.$m_WaitingPanel),this.m_bHaveWaitPanel=!this.$m_Panel.data("nowaitpanel")};Et.prototype={constructor:Et,Init:function(){0===this.$m_Panel.data("nofade",0)&&this.$m_Panel.addClass("FadeAnimation"),this.SetWaitingForData(this.m_bHaveWaitPanel)},GetPanel:function(){return this.$m_Panel},GetPanelGroup:function(){return this.m_PanelGroup},OnNewMatch:function(){},OnInitTournament:function(t){},BIsHidden:function(){return"0"===this.$m_Panel.css("opacity")||"none"==this.$m_Panel.css("display")},BPreShow:function(){return!this.m_bWaitingForData},Show:function(){this.$m_Panel.addClass("Opaque").parent().parent().css("z-index",1),this.OnShow(!0)},Hide:function(){this.$m_Panel.removeClass("Opaque").parent().parent().css("z-index",-1),this.OnShow(!1)},OnShow:function(t){},OnPrePop:function(t){},OnPostPop:function(t){},BShouldThink:function(){return!this.BIsHidden()},Think:function(t,e){!this.m_bDirty||this.m_flNextUpdateTime>t||(this.UpdateFromData(),this.m_bDirty=!1,this.m_flNextUpdateTime=t+this.GetUpdateInterval())},SetWaitingForData:function(t){(null===this.m_bWaitingForData||this.m_bWaitingForData!=t)&&(this.m_bWaitingForData=t,this.OnWaitModeChanged(t))},UpdateFromData:function(){},GetUpdateInterval:function(){return 1},OnDataReceived:function(){this.m_bDirty=!0},OnTeamIDChanged:function(t,e){},ResizeFonts:function(){},OnWindowResize:function(){this.ResizeFonts(),this.ResizeWaitingPanel()},ResizeWaitingPanel:function(){this.GetWaitingPanelReferencePanel()},GetWaitingPanelReferencePanel:function(){return this.$m_Panel},OnWaitModeChanged:function(t){var e=this;t?(e.$m_Panel.removeClass("Opaque"),void 0!==e.m_WaitingPanelHideTimerID&&clearTimeout(e.m_WaitingPanelHideTimerID),e.ResizeWaitingPanel(),e.$m_WaitingPanel.show(),e.$m_WaitingPanel.addClass("Opaque")):(this.$m_WaitingPanel.removeClass("Opaque"),this.m_WaitingPanelHideTimerID=setTimeout(function(){e.$m_WaitingPanel.hide(),e.$m_Panel.addClass("Opaque"),e.$m_LoadedContent.addClass("Opaque")},250))}};var Gt=function(){function t(){var t=$(this),e=d(t.data("teamname")),i=t.data("playerindex");O.ShowPlayerDetailsPanel(e,i)}Et.call(this,"#"+rt.DIV_ID_SPECTATOR_STATS),this.$m_Panels={},this.$m_HeroIconPanel={},this.$m_RespawnTimePanel={},this.$m_Label_PlayerName={},this.$m_Label_Stat={},this.m_bUpdatePlayerNames=null;for(var e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e){this.$m_Panels[e]=this.$m_Panels[e]||{},this.$m_HeroIconPanel[e]=this.$m_HeroIconPanel[e]||{},this.$m_RespawnTimePanel[e]=this.$m_RespawnTimePanel[e]||{},this.$m_Label_PlayerName[e]=this.$m_Label_PlayerName[e]||{},this.$m_Label_Stat[e]=this.$m_Label_Stat[e]||{};for(var i=0;i<rt.PLAYERS_PER_TEAM;++i)this.$m_Panels[e][i]=this.$m_Panel.find(".Panel_"+c(e)+"_"+i+"_js"),this.$m_HeroIconPanel[e][i]=this.$m_Panels[e][i].find(".ImageBackground"),this.$m_RespawnTimePanel[e][i]=this.$m_Panels[e][i].find(".RespawnTime"),this.$m_Label_PlayerName[e][i]=this.$m_Panels[e][i].find(".PlayerName"),this.$m_Label_Stat[e][i]=this.$m_Panels[e][i].find(".Stat")}this.$m_ComboBox=this.$m_Panel.find(".ComboBox"),this.$m_ComboDropdown=this.$m_Panel.find(".ComboDropdown"),this.m_strSelectedStatType=null;var n=this;this.$m_ComboDropdownElem={},this.$m_ComboDropdown.children().each(function(){var t=$(this),e=t.data("type");n.$m_ComboDropdownElem[e]=t}),this.$m_ComboBox.click(function(){n.$m_ComboDropdown.toggle()}),this.$m_ComboDropdown.children().click(function(){var t=$(this),e=t.data("type");n.SetSelectedStatType(e),n.$m_ComboDropdown.hide()});for(var e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e)for(var i=0;i<rt.PLAYERS_PER_TEAM;++i)this.$m_Panels[e][i].click(t)};Gt.prototype=Object.create(Et.prototype),Gt.prototype.constructor=Gt,Gt.prototype.Init=function(){Et.prototype.Init.apply(this,arguments)},Gt.prototype.OnNewMatch=function(){this.m_bUpdatePlayerNames=!0},Gt.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments)},Gt.prototype.GetUpdateInterval=function(){return 1},Gt.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments);var i=[],n=null!=B;if(n)for(var s=rt.TEAM_RADIANT;s<=rt.TEAM_DIRE;++s)for(var r=0;r<rt.PLAYERS_PER_TEAM;++r){var o=B.GetPlayer(s,r);if(!o||!o.BIsValid()){n=!1;break}if(!B.BIsStreamerMode()||B.BIsStreamerTeam(s)){this.$m_Panels[s][r].show();var m=o.GetRespawnTime();m&&this.$m_RespawnTimePanel[s][r].html(m);var h=o.GetHeroID(),_={heroid:h,player_index:r,team:s,player:o,hl:o.GetLevel(),k:o.GetKillCount(),a:o.GetAssistsCount(),d:o.GetDeathCount(),lh:o.GetLastHitsCount(),den:o.GetDeniesCount(),xppm:o.GetXPPerMinute(),gpm:o.GetGoldPerMinute(),cg:o.GetGold(),ng:o.GetNetGold(),bb:o.BHasBuyback()};if(y)for(var u in _)VUtils.Assert(void 0!==_[u]);i.push(_);var d=this.$m_HeroIconPanel[s][r].data("heroid");if(void 0===d||h!=d){var c=l(h);this.$m_HeroIconPanel[s][r].empty(),this.$m_HeroIconPanel[s][r].append(a(c)),this.$m_HeroIconPanel[s][r].data("heroid",h)}this.$m_Panels[s][r].attr("data-dead",o.BIsAlive()?0:1)}else this.$m_Panels[s][r].hide()}if(this.SetWaitingForData(!n),n){null===this.m_strSelectedStatType&&this.SetSelectedStatType(rt.STATS_SORTING_DEFAULT);var p=null;switch(this.m_strSelectedStatType){case rt.STATS_SORTING_KDA:p=["k","d","a"];break;case rt.STATS_SORTING_LHD:p=["lh","den"];break;case rt.STATS_SORTING_HEROLEVEL:p=["hl"];break;case rt.STATS_SORTING_XPPERMINUTE:p=["xppm"];break;case rt.STATS_SORTING_CURRENTGOLD:p=["cg"];break;case rt.STATS_SORTING_NETWORTH:p=["ng"];break;case rt.STATS_SORTING_GOLDPERMINUTE:p=["gpm"];break;case rt.STATS_SORTING_BUYBACKSTATUS:p=["bb"];break;default:VUtils.Assert(!1)}i.sort(function(t,e){for(var i=0,n=p.length;n>i;++i){var a=p[i];if(t[a]<e[a])return-1;if(t[a]>e[a])return 1;VUtils.Assert(t[a]==e[a])}return 0});for(var f=function(t){for(var e="",i=0,n=p.length;n>i;++i){var a=p[i],s=t[a],r="";r=$.isNumeric(s)?VUtils.FormatIntWithCommas(t[a]):"boolean"===$.type(s)?G.Localize(s?"DotaTV_BuybackStatus_Yes":"DotaTV_BuybackStatus_No"):t[a],e+=r,n-1>i&&(e+=" / ")}return e},T=0,g=i.length;g>T;++T){var I=i[T],s=I.team,r=I.player_index,o=I.player,P=this.$m_Panels[I.team][I.player_index];P.css("order",g-T),T==g-1?P.addClass("BorderBottom"):P.removeClass("BorderBottom"),this.m_bUpdatePlayerNames&&this.$m_Label_PlayerName[s][r].text(o.GetName()),this.$m_Label_Stat[s][r].text(f(I))}this.m_bUpdatePlayerNames=!1}},Gt.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)},Gt.prototype.SetSelectedStatType=function(t){this.m_strSelectedStatType=t;var e=this.$m_ComboDropdownElem[t];this.$m_ComboBox.find(".Text").text(e.find(".Desc").text())};var Nt=function(t){Et.call(this,"#"+rt.DIV_ID_TOURNAMENT_CHEER,t),this.m_flNextCheerRequestTime=null,this.m_CheerCounts={},this.$m_TeamRows={},this.$m_CheerButtons={},this.$m_rgBarContainers={},this.$m_ColoredSubBars={},this.$m_PeakBars={},this.m_TeamPeaks={},this.m_bSendCheersRequestInFlight=!1,this.m_flPercentOfPeak={},this.m_cPeak=1e3;for(var e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e){this.$m_TeamRows[e]=$(".TeamRow_"+c(e)+"_js"),this.$m_CheerButtons[e]=this.$m_TeamRows[e].find(".Button"),this.$m_rgBarContainers[e]=this.$m_TeamRows[e].find(".BarContainer"),this.$m_ColoredSubBars[e]=[],this.$m_PeakBars[e]=[],this.m_flPercentOfPeak[e]=[0,0],this.m_TeamPeaks[e]=0;for(var i=c(e),n=0;n<rt.CHEER_BAR_COUNT;++n){var a=$("<span>").addClass("Bar"),s=$("<span>").addClass("Active_"+i+"_"+(n+1)),r=$("<span>").addClass("PeakIndicator").addClass(i+"Peak");a.append(s).append(r),this.$m_rgBarContainers[e].append(a),this.$m_ColoredSubBars[e].push(s),this.$m_PeakBars[e].push(r)}}var o=this;this.$m_MessagePanel=this.$m_Panel.find(".MessagePanel"),this.$m_LoginContainer=this.$m_MessagePanel.find(".LoginContainer"),this.$m_NotLiveMsg=this.$m_MessagePanel.find(".NotLiveMsgContainer"),this.$m_MessagePanel.find(".CloseButton").click(function(){o.$m_MessagePanel.hide()}),this.$m_LoginContainer.find(".Button").click(function(){f()}),this.$m_Panel.find(".Button").click(function(){R?o.Cheer(d($(this).attr("data-team"))):o.DisplayMessageOverlay_(o.$m_LoginContainer)});var m=(this.$m_Panel.find(".Container"),this.$m_Panel.find(".HideShowButtons"));m.find(".HideButton").click(function(){o.$m_Panel.addClass("MinimalMode")}),m.find(".ShowButton").click(function(){o.$m_Panel.removeClass("MinimalMode")})};Nt.prototype=Object.create(Et.prototype),Nt.prototype.constructor=Nt,Nt.prototype.Init=function(){Et.prototype.Init.apply(this,arguments),this.ClearCheers_()},Nt.prototype.OnInitTournament=function(t){Et.prototype.OnInitTournament.apply(this,arguments),this.m_flNextCheerRequestTime=VUtils.GetTime()},Nt.prototype.OnNewMatch=function(){Et.prototype.OnNewMatch.apply(this,arguments),b&&this.ClearCheers_()},Nt.prototype.DisplayMessageOverlay_=function(t){this.$m_LoginContainer.hide(),this.$m_NotLiveMsg.hide(),t.show(),this.$m_MessagePanel.show()},Nt.prototype.ClearCheers_=function(){for(var t=rt.TEAM_RADIANT;t<=rt.TEAM_DIRE;++t)this.m_CheerCounts[t]=0},Nt.prototype.ScheduleNextCheerRequestTime_=function(){this.m_flNextCheerRequestTime>VUtils.GetTime()||(this.m_flNextCheerRequestTime=VUtils.GetTime()+rt.CHEEER_SEND_INTERVAL)},Nt.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments)},Nt.prototype.Cheer=function(t){++this.m_CheerCounts[t],this.ScheduleNextCheerRequestTime_()},Nt.prototype.OnTeamIDChanged=function(t,e){Et.prototype.OnTeamIDChanged.apply(this,arguments);var i=b.GetTeamLogoURL(e,!1),n=this.$m_CheerButtons[t].find(".ImageBackground");n.empty(),n.append(a(i));v(function(){})},Nt.prototype.GetUpdateInterval=function(){return.1},Nt.prototype.SendCheers=function(){if(this.m_bSendCheersRequestInFlight)return void this.ScheduleNextCheerRequestTime_();VUtils.Assert(B);var t=this;this.m_bSendCheersRequestInFlight=!0,$.post(J,{matchid:B.GetMatchID(),serversteamid:B.GetServerSteamID(),teamid_radiant:B.GetTeamID(rt.TEAM_RADIANT),cheers_radiant:this.m_CheerCounts[rt.TEAM_RADIANT],teamid_dire:B.GetTeamID(rt.TEAM_DIRE),cheers_dire:this.m_CheerCounts[rt.TEAM_DIRE]},function(e){if(y&&!st.cheer_use_stream_values){var i=void 0==e.result||void 0===e.result.team_1||void 0===e.result.team_2||void 0===e.result.team_2;if(!i){var n=!1;if(n){var a=Math.floor(1e3*(.5+.5*Math.sin(.2*VUtils.GetTime())));B.SetTeamCheers(rt.TEAM_RADIANT,a),B.SetTeamCheers(rt.TEAM_DIRE,a),B.SetCheerPeak(Math.max(a,B.GetCheerPeak()))}else B.SetTeamCheers(rt.TEAM_RADIANT,e.result.team_1),B.SetTeamCheers(rt.TEAM_DIRE,e.result.team_2),B.SetCheerPeak(e.result.peak)}}t.m_bSendCheersRequestInFlight=!1,t.ScheduleNextCheerRequestTime_()}),this.ClearCheers_()},Nt.prototype.MapCheerCountToScale=function(t){return VUtils.Clamp(t/B.GetCheerScaleMax(),0,1)},Nt.prototype.MapPercentToBarIndex=function(t){return Math.floor(VUtils.Clamp(t*(rt.CHEER_BAR_COUNT-1),0,rt.CHEER_BAR_COUNT-1))},Nt.prototype.UpdateCheerMeters=function(t){return},Nt.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments),null!==this.m_flNextCheerRequestTime&&this.m_flNextCheerRequestTime<=t&&this.SendCheers(),this.UpdateCheerMeters(e)},Nt.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)};var Lt=function(t){Et.call(this,"#"+rt.DIV_ID_TOURNAMENT_AD,t),this.$m_DummyGameListing=$("#DummyGameListing").clone(),this.$m_GamesInProgress=this.$m_Panel.find(".GamesInProgress"),this.$m_GamesComingUp=this.$m_Panel.find(".GamesComingUp"),this.$m_GamesInProgressList=this.$m_GamesInProgress.find(".GameList"),this.$m_GamesComingUpList=this.$m_GamesComingUp.find(".GameList"),this.$m_HeaderText=this.$m_Panel.find("h1"),this.m_flNextPollTime=null};Lt.prototype=Object.create(Et.prototype),Lt.prototype.constructor=Lt,Lt.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments)},Lt.prototype.OnInitTournament=function(t){Et.prototype.OnInitTournament.apply(this,arguments),this.m_flNextPollTime=VUtils.GetTime(),this.ResizeFonts()},Lt.prototype.ScheduleNextPoll=function(){this.m_flNextPollTime=VUtils.GetTime()+rt.TOURNAMENT_SCHEDULE_UPDATE_INTERVAL},Lt.prototype.BShouldThink=function(){return null!==b},Lt.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments),null!==this.m_flNextPollTime&&this.m_flNextPollTime<=VUtils.GetTime()&&this.UpdateData()},Lt.prototype.UpdateData=function(){var t=this;$.get(k+"getliveandupcominggames",{league_id:b.GetLeagueID(),stream_language:C},function(e){if(e.success){t.$m_GamesInProgressList.empty(),t.$m_GamesComingUpList.empty();for(var i=0,n=2,a=0,s=e.live_games.length;s>a;++a){for(var r=!1,o=0,m=e.live_games[a].matches.length;m>o;++o)if(B.GetMatchID()==e.live_games[a].matches[o].match_id){r=!0;break}if(!r&&(t.$m_GamesInProgressList.append(t.CreateGameListElement(e.live_games[a])),++i>=n))break}i>0?t.$m_GamesInProgress.show():t.$m_GamesInProgress.hide(),t.$m_GamesInProgressList.find("li").click(function(){var t=$(this).attr("data-linkurl");window.location.href=t});for(var l=0,a=0,s=Math.min(3-i,e.upcoming_series.length);s>a;++a)t.$m_GamesComingUpList.append(t.CreateGameListElement(e.upcoming_series[a])),++l;l>0?t.$m_GamesComingUp.show():t.$m_GamesComingUp.hide(),t.SetWaitingForData(!1),0===i&&0===l?t.$m_Panel.hide():t.$m_Panel.show()}}),this.ScheduleNextPoll()},Lt.prototype.CreateGameListElement=function(t){var e=this.$m_DummyGameListing.clone().removeAttr("id");return void 0!==t.watch_url&&e.attr("data-linkurl",t.watch_url),t.team1_logo_url_large&&e.find(".Team1").append(a(t.team1_logo_url_large)),t.team2_logo_url_large&&e.find(".Team2").append(a(t.team2_logo_url_large)),e},Lt.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)},Lt.prototype.ResizeFonts=function(){Et.prototype.ResizeFonts.apply(this,arguments);var t=1;this.$m_HeaderText.css("font-size",t+"em")};var Ht=function(t){Et.call(this,"#"+rt.DIV_ID_OVERVIEW_HEADER,t),this.$m_LogoSquare=this.$m_Panel.find(".Panel_OverviewHeader_LogoSquare").find(".ImageBackground"),this.$m_LogoWide=this.$m_Panel.find(".Panel_OverviewHeader_LogoWide").find(".ImageBackground"),this.$m_TournamentName=this.$m_Panel.find(".TournamentName"),this.$m_MatchDescription=this.$m_Panel.find(".MatchDescription"),this.$m_TeamKillCounts={},this.$m_TeamNames={},this.m_TeamIDs={},this.$m_DayNightController=$("#DayNightController");for(var e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e)this.$m_TeamKillCounts[e]=$(".TeamKills_"+c(e)+"_js"),this.$m_TeamNames[e]=$(".TeamName_"+c(e)+"_js"),this.m_TeamIDs[e]=null};Ht.prototype=Object.create(Et.prototype),Ht.prototype.constructor=Ht,Ht.prototype.OnDataReceived=function(){if(Et.prototype.OnDataReceived.apply(this,arguments),B)for(var t=rt.TEAM_RADIANT;t<=rt.TEAM_DIRE;++t){{t==rt.TEAM_RADIANT}this.$m_TeamKillCounts[t].html(B.GetTeamScore(t))}if(this.$m_DayNightController.length){var e=B.GetTimeOfDay(),i=parseInt(-90+360*e);this.$m_DayNightController.css("transform","rotate("+i+"deg)");

}},Ht.prototype.BRequiresWaitingPanel=function(){return!1},Ht.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments)},Ht.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)};var bt=function(e){Et.call(this,"#"+rt.DIV_ID_STATSPANEL_PLAYERS,e),this.$m_ChildPanels={},this.$m_RespawnTimePanels={},this.m_HealthBars={},this.m_ManaBars={},this.m_ItemContainers={},this.$m_PlayerNames={},this.$m_HeroImages={},this.$m_Levels={},this.$m_CurGold={},this.$m_NetGold={},this.$m_UltContainers={},this.$m_UltCooldownText={},this.m_HeroIDs={};for(var i=$("#Panel_Players_DummyInstance"),n=0;n<rt.PLAYERS_PER_TEAM;++n){for(var a=rt.TEAM_RADIANT;a<=rt.TEAM_DIRE;++a){this.m_ItemContainers[a]=this.m_ItemContainers[a]||{},this.$m_ChildPanels[a]=this.$m_ChildPanels[a]||{},this.$m_RespawnTimePanels[a]=this.$m_RespawnTimePanels[a]||{},this.$m_PlayerNames[a]=this.$m_PlayerNames[a]||{},this.$m_HeroImages[a]=this.$m_HeroImages[a]||{},this.$m_Levels[a]=this.$m_Levels[a]||{},this.$m_CurGold[a]=this.$m_CurGold[a]||{},this.$m_NetGold[a]=this.$m_NetGold[a]||{},this.$m_UltContainers[a]=this.$m_UltContainers[a]||{},this.$m_UltCooldownText[a]=this.$m_UltCooldownText[a]||{},this.m_HealthBars[a]=this.m_HealthBars[a]||{},this.m_ManaBars[a]=this.m_ManaBars[a]||{},this.m_HeroIDs[a]=this.m_HeroIDs[a]||{};var s=i.clone().removeAttr("id").data("team",a).data("playerindex",n).appendTo(this.$m_LoadedContent);s.addClass("Transparent"),this.$m_ChildPanels[a][n]=s,this.$m_RespawnTimePanels[a][n]=s.find(".RespawnTime"),this.$m_PlayerNames[a][n]=s.find(".PlayerName"),this.$m_HeroImages[a][n]=s.find(".HeroImage"),this.$m_Levels[a][n]=s.find(".Level"),this.$m_CurGold[a][n]=s.find(".CurGold").find(".Gold"),this.$m_NetGold[a][n]=s.find(".NetGold").find(".Gold"),this.$m_UltContainers[a][n]=s.find(".UltStatusContainer"),this.$m_UltCooldownText[a][n]=this.$m_UltContainers[a][n].find(".Text"),this.m_HealthBars[a][n]=new Ct({panel:s.find(".HealthContainer"),current_points_panel:s.find(".HealthPoints"),is_health_bar:!0}),this.m_ManaBars[a][n]=new Ct({panel:s.find(".ManaContainer"),current_points_panel:s.find(".ManaPoints"),is_health_bar:!1}),this.m_HeroIDs[a][n]=null,this.m_ItemContainers[a][n]=new Bt(this.$m_ChildPanels[a][n].find(".Items"),["TransparentBackground"])}this.$m_LoadedContent.append('<div style="clear: both;"></div>')}$(".Panel_Players_Instance").click(function(){var e=$(this).data("team"),i=$(this).data("playerindex");return!B||B&&B.BIsStreamerMode()&&!B.BIsStreamerTeam(e)?void t():B.BAllPlayersHaveHeroes()?void O.ShowPlayerDetailsPanel(e,i):void t()})};bt.prototype=Object.create(Et.prototype),bt.prototype.constructor=bt,bt.prototype.OnNewMatch=function(){Et.prototype.OnNewMatch.apply(this,arguments);for(var t=rt.TEAM_RADIANT;t<=rt.TEAM_DIRE;++t)for(var e=(t==rt.TEAM_RADIANT,0);e<rt.PLAYERS_PER_TEAM;++e)if(B.BIsStreamerMode()){var i=this.$m_ChildPanels[t][e];B.BIsStreamerTeam(t)?i.removeClass("NonStreamerTeam"):i.addClass("NonStreamerTeam")}},bt.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments);for(var t=0,e=rt.TEAM_RADIANT;e<=rt.TEAM_DIRE;++e){for(var i=(e==rt.TEAM_RADIANT,0);i<rt.PLAYERS_PER_TEAM;++i){var n=this.$m_ChildPanels[e][i],a=B.GetPlayer(e,i);if(a&&a.BIsValid()){this.$m_PlayerNames[e][i].text(a.GetName());var s=a.GetHeroID();if(this.m_HeroIDs[e][i]!=s){var r=l(s);this.$m_HeroImages[e][i].attr("src",r),this.m_HeroIDs[e][i]=s,y&&console.log("Loading new hero image, "+r)}this.$m_Levels[e][i].html(a.GetLevel()),this.$m_CurGold[e][i].html(a.GetGold()),this.$m_NetGold[e][i].html(a.GetNetGold());var o=this.m_HealthBars[e][i];o.SetTeam(e),o.Update(a),this.m_ManaBars[e][i].Update(a),O.BIsSlimMode()?t<2*rt.PLAYER_PER_TEAM-1&&n.addClass("BottomBorder_js"):i<rt.PLAYERS_PER_TEAM-1&&n.addClass("BottomBorder_js"),this.$m_ChildPanels[e][i].removeClass("Transparent"),this.$m_ChildPanels[e][i].attr("data-dead",a.BIsAlive()?0:1);var m=a.GetRespawnTime();m&&this.$m_RespawnTimePanels[e][i].html(m);for(var h=0;h<rt.NUM_ITEM_SLOTS;++h)this.m_ItemContainers[e][i].SetSlotToItem(h,a.GetItem(h));if(a.BHasUlt()){var _=a.GetUltCooldown();_>0?(this.$m_UltCooldownText[e][i].html(_),this.$m_UltContainers[e][i].attr("data-ultstatus","oncooldown")):a.BHasEnoughManaForUlt()?this.$m_UltContainers[e][i].attr("data-ultstatus","ultready"):this.$m_UltContainers[e][i].attr("data-ultstatus","notenoughmana")}++t}else this.$m_ChildPanels[e][i].addClass("Transparent")}this.SetWaitingForData(0==t)}},bt.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments)},bt.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)};var Bt=function(t,e){this.$m_Container=t,this.$m_ItemContainer=$("<div>").addClass("Items"),t.append(this.$m_ItemContainer),this.$m_Items=[],this.$m_Images=[],this.$m_ImageBackgrounds=[],this.m_ItemKeys=[];for(var i=0;i<rt.NUM_ITEM_SLOTS;++i){var n=$("<div>").addClass("Item"),a=$("<div>").addClass("ImageBackground").addClass("ImageBackground4x3");if(this.$m_Items.push(n),this.$m_ImageBackgrounds.push(a),this.$m_Images.push(null),this.m_ItemKeys.push(null),e)for(var s=0;s<e.length;++s)a.addClass(e[s]);n.append(a),this.$m_ItemContainer.append(n)}};Bt.prototype={constructor:Bt,SetSlotToItem:function(t,e){var i=e.GetKey();if(i!=this.m_ItemKeys[t]){var a=this.$m_ImageBackgrounds[t];if(null===i)this.ClearItemImageForSlot(t);else{var s=_(i,!1),r=this.$m_Images[t];if(!r){var o=this.$m_Container.attr("data-enabletooltips");r=n(null,e,o),a.append(r),this.$m_Images[t]=r}r.attr("src",s)}this.m_ItemKeys[t]=i}},ClearItemImageForSlot:function(t){this.$m_Images[t]&&(this.$m_Images[t].remove(),this.$m_Images[t]=null,this.m_ItemKeys[t]=null)},ClearItemImages:function(){for(var t=0;t<rt.NUM_ITEM_SLOTS;++t)this.ClearItemImageForSlot(t)}};var Ot=function(t){Et.call(this,"#"+rt.DIV_ID_STATSPANEL_PLAYERDETAILS,t);var e=this.$m_Panel.find("#Panel_PlayerDetails_RowA");this.m_iPlayer=null,this.m_nPlayerID=null,this.m_nTeam=null,this.$m_PlayerName=this.$m_Panel.find(".PlayerName"),this.$m_HeroImage=this.$m_Panel.find(".HeroImage"),this.$m_RespawnTimePanel=this.$m_Panel.find(".RespawnTime"),this.$m_LevelTextContainer=e.find(".ColumnB").find(".Heading"),this.$m_LevelText=this.$m_Panel.find(".LevelText"),this.$m_Level=this.$m_LevelText.find(".Level"),this.$m_HeroName=this.$m_Panel.find(".HeroName"),this.$m_BuybackStatus=this.$m_Panel.find(".BuybackStatus"),this.$m_Attributes=this.$m_Panel.find(".Attributes"),this.$m_GoldTextContainer=e.find(".ColumnC").find(".Header"),this.$m_Gold=this.$m_Panel.find(".Gold"),this.$m_GoldAbbrev=this.$m_Panel.find(".GoldAbbrev"),this.$m_ItemContainer=this.$m_Panel.find("#Panel_PlayerDetails_ItemContainer"),this.$m_StashItemContainer=this.$m_Panel.find("#Panel_PlayerDetails_StashItemContainer"),this.m_ItemContainer=new Bt(this.$m_ItemContainer,["InnerShadow","DarkGrayBackgroundColor"]),this.m_StashItemContainer=new Bt(this.$m_StashItemContainer,["InnerShadow"]),this.$m_Kills=this.$m_Panel.find(".Kills"),this.$m_Deaths=this.$m_Panel.find(".Deaths"),this.$m_Assists=this.$m_Panel.find(".Assists"),this.$m_GoldPerMin=this.$m_Panel.find(".GoldPerMin"),this.$m_XPPerMin=this.$m_Panel.find(".XPPerMin"),this.$m_LastHits=this.$m_Panel.find(".LastHits"),this.$m_Denies=this.$m_Panel.find(".Denies"),this.$m_NetGold=this.$m_Panel.find(".NetGold"),this.$m_HeroDamage=this.$m_Panel.find(".HeroDamage"),this.$m_TowerDamage=this.$m_Panel.find(".TowerDamage"),this.$m_HealingProvided=this.$m_Panel.find(".HealingProvided");var i=this.$m_Panel.find(".HealthContainer");this.m_HealthBar=new Ct({panel:i,current_points_panel:i.find(".Points"),max_points_panel:i.find(".MaxPoints"),points_splitter_panel:i.find(".PointsSplitter"),regen_rate_panel:i.find(".RegenRate"),is_health_bar:!0});var n=this.$m_Panel.find(".ManaContainer");this.m_ManaBar=new Ct({panel:n,current_points_panel:n.find(".Points"),max_points_panel:n.find(".MaxPoints"),regen_rate_panel:n.find(".RegenRate"),is_health_bar:!1});var a=this.$m_Panel.find(".AbilitiesContainer");this.$m_Abilities=$("#DummyPlayerDetails_Ability").children().each(function(){a.append($(this).clone())}),this.$m_Abilities=a,this.$m_AbilityDetails=$("#Panel_PlayerDetails_RowC"),this.$m_AbilityBlocksDummy=$("#DummyAbilityLevelBlocks"),this.$m_Blocks={},this.$m_rgBlocksContainers=[],this.$m_ShoppingListContainer=$("#Panel_PlayerDetails_RowD"),this.$m_ShoppingListItems=this.$m_ShoppingListContainer.find(".Items")};Ot.prototype=Object.create(Et.prototype),Ot.prototype.constructor=Ot,Ot.prototype.SetTeam=function(t){this.m_nTeam=t},Ot.prototype.SetPlayer=function(t){this.m_iPlayer=t},Ot.prototype.BPreShow=function(){if(!B)return!1;var t=B.GetPlayer(this.m_nTeam,this.m_iPlayer);if(!t||!t.BIsValid())return!1;this.m_ItemContainer.ClearItemImages(),this.m_StashItemContainer.ClearItemImages(),this.m_HealthBar.SetTeam(this.m_nTeam),VUtils.AssertMsg(void 0!==K[t.GetHeroID()],"No hero data for hero "+t.GetHeroID()),this.$m_PlayerName.html(t.GetName()),this.$m_HeroImage.attr("src",F+"heroes/"+K[t.GetHeroID()].key+"_vert.jpg"),this.$m_Level.html(t.GetLevel()),this.$m_HeroName.html(t.GetHeroName()),this.$m_AbilityDetails.empty(),this.$m_rgBlocksContainers=[],this.$m_Blocks={};for(var e=t.GetAbilityCount(),i=0;i<rt.MAX_HERO_ABILITIES_INCLUDING_ATTRIBUTE_BONUS;++i){var n=this.$m_Abilities.find(".AbilityContainer_"+i);if(i>=e||g(t.GetAbilityNameInternal(i)))n.addClass("Transparent");else{var s=t.GetAbilityNameInternal(i);n.removeClass("Transparent");var r=n.find(".ImageBackground");r.empty();var o=a(t.GetAbilityImageURL(i));o.addClass("abilityIconWithTooltip").attr("abilityname",s),r.append(o),i<rt.MAX_HERO_ABILITIES_INCLUDING_ATTRIBUTE_BONUS-1&&n.addClass("AbilityRightPadding"),n.show();var l=this.$m_AbilityBlocksDummy.clone().removeAttr("id");l.find(".Name").html(t.GetAbilityName(i)),o=a(t.GetAbilityImageURL(i)),o.addClass("abilityIconWithTooltip").attr("abilityname",s),l.find(".ImageBackground").append(o);var h=l.find(".Blocks"),_={},d=this;h.children().each(function(){var t=$(this),e=t.data("level"),i=t.find(":nth-child(1)");_[e]=i});var c=t.GetAbilityID(i);d.$m_Blocks[c]=_,d.$m_rgBlocksContainers.push(h),this.$m_AbilityDetails.append(l)}}this.$m_Attributes.children().each(function(){var e=$(this),i=e.data("attribute"),n=e.find(".PrimaryIcon");t.GetHeroPrimaryAttribute()===i?n.removeClass("Hidden"):n.addClass("Hidden")}),this.UpdateAbilityBlocks(t),this.UpdateAttributes(t),this.UpdateDeathState(t),this.$m_KDAStatsContainer=$("#Panel_PlayerDetails_RowA_ColumnD"),this.$m_KDAStatsAbbreviations=this.$m_KDAStatsContainer.find(".Abbrev"),this.$m_KDAStatsFirstRow=$("#Panel_PlayerDetails_RowA_ColumnD_FirstRow"),this.$m_KDAStatsFirstRowAbbreviations=this.$m_KDAStatsFirstRow.find(".Abbrev");var p=$("#Panel_PlayerDetails_RowB");this.$m_RowB=p;var f=u(this.m_nTeam);this.$m_Farm=p.find(".FarmPercent"),this.$m_Damage=p.find(".DamagePercent"),this.$m_Fight=p.find(".FightPercent"),this.$m_Dead=p.find(".DeadPercent"),this.$m_SelfKillsOnEnemy=[],this.$m_SelfAssistsOnEnemy=[],this.$m_EnemyKillsOnSelf=[],this.$m_EnemyAssistsOnSelf=[],this.$m_EnemyHeroIcons=[];for(var T=0;T<rt.PLAYERS_PER_TEAM;++T){var I=p.find(".Player_"+T),P=I.find(".SelfKillsAndAssistsOnEnemy");this.$m_SelfKillsOnEnemy.push(P.find(".Kills")),this.$m_SelfAssistsOnEnemy.push(P.find(".Assists"));var A=I.find(".EnemyKillsAndAssistsOnSelf");this.$m_EnemyKillsOnSelf.push(A.find(".Kills")),this.$m_EnemyAssistsOnSelf.push(A.find(".Assists"));var S=B.GetPlayer(f,T),v=I.find(".HeroIcon");v.empty(),v.append(a(m(S.GetHeroID()))),this.$m_EnemyHeroIcons.push(v)}return this.UpdateShoppingListItems(),!0},Ot.prototype.UpdateShoppingListItems=function(){var t=B.GetPlayer(this.m_nTeam,this.m_iPlayer);if(t&&t.BIsValid()){this.$m_ShoppingListItems.empty(),this.m_cCachedShoppingList=0;for(var e=t.GetShoppingListCount(),i=$("#DummyPlayerDetails_ShoppingItem"),n=16,s=parseInt(e/n),r=0;e>r;++r){var o=t.GetShoppingListItemAtIndex(r),m=i.clone().removeAttr("id");m.find(".Time").html(o.GetTime());var l=_(o.GetItemID(),!1),h=m.find(".ImageBackground");h.append(a(l)),o.BWasSold()&&h.find(".ShoppingItemSoldOverlay").removeClass("Hidden");var u=parseInt(r/n);s>u&&m.addClass("ShoppingItemContainerBottomMargin"),(r+1)%n!=0&&m.addClass("ShoppingItemContainerRightMargin"),this.$m_ShoppingListItems.append(m),++this.m_cCachedShoppingList}}},Ot.prototype.UpdateAbilityBlocks=function(t){for(var e=(t.GetAbilityCount(),t.GetLevelPointCount()),i=0;e>i;++i)for(var n=i+1,a=t.GetLevelPointAbilities(n),s=0,r=a.length;r>s;++s){var o=a[s];if(void 0!==this.$m_Blocks[o]){this.$m_Blocks[o][n].html(n),this.$m_Blocks[o][n].addClass("Leveled");for(var m in this.$m_Blocks)this.$m_Blocks[m][n].addClass("LevelReached")}}},Ot.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments);var t=B.GetPlayer(this.m_nTeam,this.m_iPlayer);if(t&&t.BIsValid()){for(var e=0;e<rt.NUM_ITEM_SLOTS;++e)this.m_ItemContainer.SetSlotToItem(e,t.GetItem(e)),this.m_StashItemContainer.SetSlotToItem(e,t.GetStashItem(e));this.UpdateAbilityBlocks(t),this.m_cCachedShoppingList!==t.GetShoppingListCount()&&this.UpdateShoppingListItems()}},Ot.prototype.Think=function(t,e){if(Et.prototype.Think.apply(this,arguments),B){var i=B.GetPlayer(this.m_nTeam,this.m_iPlayer);this.m_HealthBar.Update(i),this.m_ManaBar.Update(i)}},Ot.prototype.UpdateFromData=function(){Et.prototype.UpdateFromData.apply(this,arguments);var t=B.GetPlayer(this.m_nTeam,this.m_iPlayer);if(t&&t.BIsValid()){this.UpdateAbilities(t),this.UpdateAttributes(t),this.$m_Gold.html(t.GetGold()),this.$m_Kills.html(t.GetKillCount()),this.$m_Deaths.html(t.GetDeathCount()),this.$m_Assists.html(t.GetAssistsCount()),this.$m_GoldPerMin.html(VUtils.AbbreviateNumber(t.GetGoldPerMinute())),this.$m_XPPerMin.html(VUtils.AbbreviateNumber(t.GetXPPerMinute())),this.$m_LastHits.html(t.GetLastHitsCount()),this.$m_Denies.html(t.GetDeniesCount()),this.$m_NetGold.html(VUtils.AbbreviateNumber(t.GetNetGold())),this.$m_HeroDamage.html(VUtils.AbbreviateNumber(t.GetHeroDamage())),this.$m_TowerDamage.html(VUtils.AbbreviateNumber(t.GetTowerDamage())),this.$m_HealingProvided.html(VUtils.AbbreviateNumber(t.GetHealingProvided()));for(var e=t.GetPlayerID(),i=u(this.m_nTeam),n=0;n<rt.PLAYERS_PER_TEAM;++n){var a=B.GetPlayer(i,n).GetPlayerID();this.$m_SelfKillsOnEnemy[n].html(t.GetKillCountOnEnemyPlayer(a)),this.$m_SelfAssistsOnEnemy[n].html(t.GetAssistedKillCountOnEnemyPlayer(a));var s=B.GetPlayer(i,n);this.$m_EnemyKillsOnSelf[n].html(s.GetKillCountOnEnemyPlayer(e)),this.$m_EnemyAssistsOnSelf[n].html(s.GetAssistedKillCountOnEnemyPlayer(e))}this.UpdateDeathState(t)}},Ot.prototype.UpdateDeathState=function(t){this.$m_Panel.attr("data-dead",t.BIsAlive()?0:1);var e=t.GetRespawnTime();e&&this.$m_RespawnTimePanel.html(e)},Ot.prototype.UpdateAbilities=function(){for(var t=B.GetPlayer(this.m_nTeam,this.m_iPlayer),e=t.GetAbilityCount(),i=0;e>i;++i){for(var n=this.$m_Abilities.find(".AbilityContainer_"+i),a=n.find(".Levels"),s=t.GetAbilityLevel(i),r=t.GetMaxAbilityLevel(i),o=0;r>o;++o){var m=a.find(".AbilityLevel_"+o);null!==s&&s>o?m.removeClass("EmptyLevel").addClass("LeveledLevel"):m.removeClass("LeveledLevel").addClass("EmptyLevel")}var l=t.GetAbilityManaCostForLevel(i,s);n.find(".ManaCost").html(0===l?"&nbsp;":l)}},Ot.prototype.UpdateAttributes=function(t){this.$m_Attributes.children().each(function(){var e=$(this),i=e.find(".Values"),n=e.data("attribute"),a=t.GetHeroBaseAttributeValue(n),s=t.GetHeroBonusAttributeValue(n);s>0&&(a+="+"+s),i.html(a)})},Ot.prototype.ResizeFonts=function(){if(Et.prototype.ResizeFonts.apply(this,arguments),this.$m_rgBlocksContainers.length){for(var t=this.$m_rgBlocksContainers[0].children(":nth-child(1)").children(":nth-child(1)").actual("width"),e=t/16,i=0;i<this.$m_rgBlocksContainers.length;++i){var n=this.$m_rgBlocksContainers[i];n.css("font-size",.6*e+"em"),n.css("line-height",t+"px")}var a=Math.min(1.6,Math.max(1.3,$(window).width()/750)),s=.75*a,r=1.1*s+"em",o=1.2*a+"em";this.$m_ShoppingListContainer.css("font-size",.6*a+"em"),this.$m_GoldTextContainer.css("line-height",o),this.$m_Gold.css("font-size",r),this.$m_GoldAbbrev.css("font-size",.8*s+"em"),this.$m_PlayerName.css("font-size",o),this.$m_LevelText.css("font-size",r),this.$m_LevelTextContainer.css("line-height",o),this.$m_HeroName.css("font-size",.65*a+"em"),this.$m_Attributes.css("font-size",.5*a+"em"),this.$m_Abilities.children().css("font-size",.6*a+"em"),this.$m_RespawnTimePanel.css("font-size",1.6*a+"em"),this.$m_RowB.css("font-size",.65*a+"em");var m=.4;this.$m_KDAStatsContainer.css("font-size",s+"em"),this.$m_KDAStatsAbbreviations.css("font-size",m*a+"em"),this.$m_KDAStatsFirstRow.css("font-size",r),this.$m_KDAStatsFirstRowAbbreviations.css("font-size",m*s+"em")}},Ot.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)};var wt=function(t,e){Et.call(this,"#"+rt.DIV_ID_STATSPANEL_MATCHSTATS,t),this.m_flNextRenderTime=null,this.$m_IFrame=$("#"+e),this.$m_ComboBox=$("#GraphComboBoxContainer"),this.$m_ComboBoxText=this.$m_ComboBox.find(".Text"),this.$m_ComboDropdown=this.$m_ComboBox.find(".ComboDropdown");var i=this;this.$m_ComboBox.click(function(){i.$m_ComboDropdown.toggle()}),this.m_strCurrentGraphType=null,this.m_rgGraphDisplayStrings={},VUtils.AssertMsg(this.$m_IFrame.length,"Could not find IFrame div with ID "+e)};wt.prototype=Object.create(Et.prototype),wt.prototype.constructor=wt,wt.prototype.OnTeamIDChanged=function(t,e){Et.prototype.OnTeamIDChanged.apply(this,arguments);var i=b.GetTeamLogoURL(e,!1);this.SendMessageToIFrame("UpdateTeamLogo",{team:c(t),url:i})},wt.prototype.BPreShow=function(){return null!==this.m_flNextRenderTime},wt.prototype.Show=function(){Et.prototype.Show.apply(this,arguments),this.$m_ComboBox.show(),this.ResizeIFrameAndRender()},wt.prototype.Hide=function(){Et.prototype.Hide.apply(this,arguments),this.$m_ComboBox.hide()},wt.prototype.RenderGraph=function(){if(B&&B.BAllPlayersHaveHeroes()){var t=L.ComposeObjectForGraphSystem();this.SendMessageToIFrame("RenderGraph",t),this.m_flNextRenderTime=VUtils.GetTime()+rt.GRAPH_REFRESH_INTERVAL}},wt.prototype.SwitchToNewGraphType=function(t){this.m_strCurrentGraphType!==t&&(this.SendMessageToIFrame("InitGraph",{graph_name:t}),this.$m_ComboBoxText.html(this.m_rgGraphDisplayStrings[t]),this.m_strCurrentGraphType=t)},wt.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments);var t=VUtils.GetTime();this.m_flNextRenderTime>t||(this.SetWaitingForData(!1),this.RenderGraph())},wt.prototype.PopulateGraphComboBox=function(t){for(var e=0,i=t.length;i>e;++e){var n=t[e].name,a=t[e].display,s=$("#DummyComboDropdownElement").clone().removeAttr("id");s.attr("data-graphname",n),s.find(".Desc").html(a),this.$m_ComboDropdown.append(s),this.m_rgGraphDisplayStrings[n]=a}var r=this;this.$m_ComboDropdown.find("li").click(function(){var t=$(this).attr("data-graphname");r.SwitchToNewGraphType(t)})},wt.prototype.SendMessageToIFrame=function(t,e){P(this.$m_IFrame,x,{msg:t,data:e})},wt.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments)},wt.prototype.UpdateFromData=function(){Et.prototype.UpdateFromData.apply(this,arguments)},wt.prototype.OnPrePop=function(t){Et.prototype.OnPrePop.apply(this,arguments),this.$m_IFrame.attr("data-popping","1")},wt.prototype.OnPostPop=function(t){Et.prototype.OnPostPop.apply(this,arguments),this.ResizeIFrameAndRender(),this.$m_IFrame.attr("data-popping","0")},wt.prototype.ResizeIFrameAndRender=function(){this.$m_IFrame.css("height",this.$m_Panel.parent().height()+"px"),this.RenderGraph()},wt.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments),this.ResizeIFrameAndRender()},wt.prototype.OnIFrameGraphSystemUIInit=function(t){this.m_flNextRenderTime=VUtils.GetTime();var e=O.GetMiniNavOptionsPanel();e.empty();var i=this;for(var n in t){var a=t[n],s=rt.DIV_ID_STATSPANEL_MATCHSTATS+"_"+n,r=O.CreateCheckbox(s,a.display_name,a.value);r.data("option-name",n),r.find("input").on("change",function(){var t=$(this).parent().data("option-name"),e=0!=$(this).is(":checked");i.SendMessageToIFrame("ModifyGraphOption",{option_name:t,option_value:e}),i.RenderGraph()}),e.append(r)}},wt.prototype.GetWaitingPanelReferencePanel=function(){return this.$m_Panel.parent()},wt.prototype.OnShow=function(t){Et.prototype.OnShow.apply(this,arguments);var e=O.GetMiniNavOptionsPanel();t?e.show():e.hide()};var Ut=function(t){Et.call(this,"#"+rt.DIV_ID_STATSPANEL_DRAFT,t);var e=this.$m_Panel.find(".Bans"),i=this.$m_Panel.find(".Picks");this.$m_DummyItem=$("#DummyDraft_Item"),this.$m_BansHeader=e.find("h1"),this.$m_PicksHeader=i.find("h1"),this.$m_BanItems=e.find(".Items"),this.$m_PickItems=i.find(".Items"),this.$m_Legend=this.$m_Panel.find(".Legend"),this.$m_RadiantTeamName=this.$m_Legend.find(".TeamName_Radiant_js"),this.$m_DireTeamName=this.$m_Legend.find(".TeamName_Dire_js"),this.$m_Block=this.$m_Legend.find(".Block"),this.$m_RadiantLabel=$(this.$m_Legend.find(".RadiantDireLabel")[0]),this.$m_DireLabel=$(this.$m_Legend.find(".RadiantDireLabel")[1]),this.m_PicksBansData={bans:{label_base_key:"DotaTV_Ban",get_data_func:function(){return B.GetBans()},panel:this.$m_BanItems,count:0},picks:{label_base_key:"DotaTV_Pick",get_data_func:function(){return B.GetPicks()},panel:this.$m_PickItems,count:0}}};Ut.prototype=Object.create(Et.prototype),Ut.prototype.constructor=Ut,Ut.prototype.OnNewMatch=function(){Et.prototype.OnNewMatch.apply(this,arguments),this.Clear_()},Ut.prototype.Clear_=function(){for(var t in this.m_PicksBansData){var e=this.m_PicksBansData[t];e.panel.empty(),e.count=0,e.items=[]}},Ut.prototype.BPreShow=function(){if(!B)return!1;VUtils.AssertMsg(b,"User should never be able to show this panel unless we are in a tournament game."),this.Clear_();for(var t in this.m_PicksBansData)for(var e=this.m_PicksBansData[t],i=e.panel,n=e.get_data_func(),a=e.label_base_key,s=(n.length,0);10>s;++s){var r=this.$m_DummyItem.clone().removeAttr("id").addClass("PickBanItem ").addClass("Transparent");r.find(".PickBanLabel").html(G.Localize(a+String(s+1))),i.append(r),e.items.push(r)}return this.UpdatePicksBans(),!0},Ut.prototype.UpdatePicksBans=function(){for(var t in this.m_PicksBansData){for(var e=this.m_PicksBansData[t],i=e.get_data_func(),n=i.length,s=e.count;n>s;++s){var r=e.items[s],o=i[s].GetHeroID(),m=h(o),l=i[s].GetTeam(),_=r.find(".ImageBackground");_.empty(),_.append(a(m)),r.find(".HeroNameLabel").text(T(o)),r.find(".TeamGradiant").addClass("TeamGradiant"+c(l)),r.removeClass("Transparent")}e.count=n}},Ut.prototype.OnDataReceived=function(){Et.prototype.OnDataReceived.apply(this,arguments),this.UpdatePicksBans()},Ut.prototype.Think=function(t,e){Et.prototype.Think.apply(this,arguments)},Ut.prototype.UpdateFromData=function(){Et.prototype.UpdateFromData.apply(this,arguments)},Ut.prototype.OnPrePop=function(t){Et.prototype.OnPrePop.apply(this,arguments),this.ResizeFonts()},Ut.prototype.ResizeFonts=function(){Et.prototype.ResizeFonts.apply(this,arguments);var t=this.$m_Block.actual("width"),e=t/16,i=1.5*e+"em";this.$m_BansHeader.css("font-size",i),this.$m_PicksHeader.css("font-size",i),this.$m_Legend.css("line-height",t+"px"),this.$m_RadiantTeamName.css("font-size",i),this.$m_DireTeamName.css("font-size",i);var n=.7*e+"em";this.$m_BanItems.css("font-size",n),this.$m_PickItems.css("font-size",n);var a=1.3*e+"em";this.$m_RadiantLabel.css("font-size",a),this.$m_DireLabel.css("font-size",a)},Ut.prototype.OnWindowResize=function(){Et.prototype.OnWindowResize.apply(this,arguments)};var kt=function(){this.m_ActivePanel=null};kt.prototype={BIsActivePanel:function(t){return t&&this.m_ActivePanel==t},SetActivePanel:function(t){this.m_ActivePanel=t},HideActivePanel:function(){this.m_ActivePanel&&this.m_ActivePanel.Hide()}};var xt=function(){var t=new kt;this.m_PanelGroupMap={},this.m_PanelGroupMap[rt.PANELGROUP_ID_MAIN]=t,this.m_PanelMap={},this.m_PanelMap[rt.DIV_ID_SPECTATOR_STATS]=new Gt,this.m_PanelMap[rt.DIV_ID_TOURNAMENT_AD]=new Lt(t),this.m_PanelMap[rt.DIV_ID_TOURNAMENT_CHEER]=new Nt(t),this.m_PanelMap[rt.DIV_ID_OVERVIEW_HEADER]=new Ht(t),this.m_PanelMap[rt.DIV_ID_STATSPANEL_PLAYERS]=new bt(t),this.m_PanelMap[rt.DIV_ID_STATSPANEL_PLAYERDETAILS]=new Ot(t),this.m_PanelMap[rt.DIV_ID_STATSPANEL_MATCHSTATS]=new wt(t,rt.DIV_ID_IFRAME_MATCHSTATS),this.m_PanelMap[rt.DIV_ID_STATSPANEL_DRAFT]=new Ut(t),this.$m_Window=$(window),this.$m_MiniNav=$("#MiniNav"),this.$m_MiniNavOptions=$("#MiniNavOptions"),this.$m_MiniNavLinkContainer=this.$m_MiniNav.find(".Links"),this.$m_ViewerCount=this.$m_MiniNav.find(".Count"),this.$m_MatchTime=$(".MatchTime"),this.$m_DummyCheckbox=$("#DummyCheckbox"),this.$m_VideoIFrame=$("#"+rt.DIV_ID_VIDEO_IFRAME),this.$m_StreamDataPanelContainer=$("#StreamDataPanelContainer"),this.$m_PopBottomPanelsButton=$("#PopBottomPanelsButton"),this.m_bIsSlimMode=!1,this.m_bPopped=!1,this.m_cUniqueIDs=0,this.m_bShouldProcessNewMatch=!1};xt.prototype={constructor:xt,Init:function(){function e(){VUtils.BIsInFullscreen()?(s.addClass("Hidden"),r.removeClass("Hidden")):(s.removeClass("Hidden"),r.addClass("Hidden"))}this.ShowTournamentPanels(!1);for(var i in this.m_PanelMap)this.m_PanelMap[i].Init();$("#MiniNav .Links .NavLink").click(function(){var e=$(this).attr("data-disabled");return e?void t():void O.ShowStatsPanelByDivName($(this).data("divname"))});var n=this;this.$m_PopBottomPanelsButton.click(function(){n.TogglePopped()}),$(".LoginLink").click(function(){alert("This will bring up an overlay for logging in. For now, we just redirect."),f()}),$(".ToggleColumnVisibility_js").click(function(){var t=$(this),e=t.parent(),i=$(t.data("selector")),n="FlexColumnHideAnimation";i.toggleClass(n),t.attr("data-hidden",parseInt(t.attr("data-hidden"))?"0":"1");var a=t.data("parentclass");e.toggleClass(a),e.hasClass("NoLeftMargin")&&e.hasClass("NoRightMargin")?e.attr("data-bothhidden","1"):e.attr("data-bothhidden","0")}),$(".CheckboxDropdownItems_js").each(function(){var t=$(this),e=O.CreateCheckbox(null,"",!0);t.append(e)}),$(".CheckboxDropdownItems_js :checkbox").click(function(t){return t.preventDefault(),!1});var a=$(".BrowserFullscreenToggle"),s=a.find(".EnterButton"),r=a.find(".ExitButton");e(),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){e()}),$(".BrowserFullscreenToggle").click(function(){VUtils.BIsInFullscreen()?VUtils.ExitFullscreen():VUtils.RequestFullscreen()}),$(document).keyup(function(t){switch(t.keyCode){case 27:n.BIsPopped()&&n.TogglePopped()}}),this.SetupCSSAnimationEventHooks_()},ShowTournamentPanels:function(t){var e=$(".TournamentOnly");t?e.each(function(){var t=$(this);(void 0===t.attr("data-isdevonly")||y)&&t.attr("data-istournamentgame","1")}):e.attr("data-istournamentgame","0")},SetupCSSAnimationEventHooks_:function(){},OnNewMatch:function(){this.m_bShouldProcessNewMatch=!0},ProcessNewMatch:function(){if(B){for(var t in this.m_PanelMap)this.m_PanelMap[t].OnNewMatch();O.ShowStatsPanelByDivName(rt.DIV_ID_STATSPANEL_PLAYERS),this.m_bShouldProcessNewMatch=!1}},OnInitTournament:function(t){for(var e in this.m_PanelMap)this.m_PanelMap[e].OnInitTournament(t)},GenerateUniqueID:function(){return"UID_"+this.m_cUniqueIDs++},CreateCheckbox:function(t,e,i){var n=this.$m_DummyCheckbox.clone();return t&&0!==t.length||(t=this.GenerateUniqueID()),n.attr("id",t),n.children("input").attr("id",t+"_").prop("checked",i),n.children("label").attr("for",t+"_").html(e),n},BIsPopped:function(){return this.m_bPopped},TogglePopped:function(){this.m_bPopped?(this.$m_MiniNav.css("margin-top",0),this.$m_MiniNav.removeClass("Popped"),this.$m_StreamDataPanelContainer.removeClass("Popped")):(this.$m_MiniNav.css("margin-top",-this.$m_VideoIFrame.height()+"px"),this.$m_MiniNav.addClass("Popped"),this.$m_StreamDataPanelContainer.addClass("Popped")),this.m_bPopped=!this.m_bPopped,this.m_PanelGroupMap[rt.PANELGROUP_ID_MAIN].m_ActivePanel.OnPrePop(this.m_bPopped);var t=this;setTimeout(function(){t.m_PanelGroupMap[rt.PANELGROUP_ID_MAIN].m_ActivePanel.OnPostPop(this.m_bPopped)},2*rt.POP_ANIMATION_DURATION)},BIsSlimMode:function(){return this.m_bIsSlimMode},GetMiniNavOptionsPanel:function(){return this.$m_MiniNavOptions},GetMatchStatsPanel:function(){return this.m_PanelMap[rt.DIV_ID_STATSPANEL_MATCHSTATS]},GetOverviewPanel:function(){return this.m_PanelMap[rt.DIV_ID_OVERVIEW_HEADER]},OnDataReceived:function(){for(var t in this.m_PanelMap){var e=this.m_PanelMap[t];if(!e.BIsHidden()){var i=e.GetPanelGroup();(!i||i.BIsActivePanel(e))&&e.OnDataReceived()}}},OnTeamIDChanged:function(t,e){if(b&&!(0>=e||null==e))for(var i in this.m_PanelMap){var n=this.m_PanelMap[i];n.OnTeamIDChanged(t,e)}},OnTeamNameChanged:function(t,e){var i=c(t);$(".TeamName_"+i+"_js").html(e)},Think:function(t,e){this.m_bShouldProcessNewMatch&&this.ProcessNewMatch();for(var i in this.m_PanelMap){var n=this.m_PanelMap[i];n.BShouldThink()&&n.Think(t,e)}null!==et&&this.$m_ViewerCount.html(VUtils.FormatIntWithCommas(et)),B&&(H.BShouldUpdate(t)&&(H.Think(e),H.Render()),this.$m_MatchTime.html(VUtils.FormatTimestamp(B.GetMatchTime())))},ShowPlayerDetailsPanel:function(t,e){O.ActivateMiniNavLink(rt.DIV_ID_STATSPANEL_PLAYERDETAILS);var i=this.m_PanelMap[rt.DIV_ID_STATSPANEL_PLAYERDETAILS];i.SetTeam(t),i.SetPlayer(e),this.ShowPanelInternal_(i)},ShowSpectatorStatsPanel:function(){var t=this.m_PanelMap[rt.DIV_ID_SPECTATOR_STATS];this.ShowPanelInternal_(t)},ActivateMiniNavLink:function(t){this.$m_MiniNavLinkContainer.children().each(function(){return $(this).data("divname")==t?void $(this).addClass("Glow"):void $(this).removeClass("Glow")})},ShowStatsPanelByDivName:function(t){this.ActivateMiniNavLink(t),this.ShowPanelInternal_(this.m_PanelMap[t])},OnWindowResize:function(){$(window).width()/$(window).height();H.OnWindowResize();for(var t in this.m_PanelMap){var e=this.m_PanelMap[t];e.BIsHidden()||e.OnWindowResize()}this.m_bIsSlimMode=this.$m_Window.width()<rt.BROWSER_WIDTH_SLIM},ShowPanelInternal_:function(t){if(t){var e=t.BPreShow();t.SetWaitingForData(!e);var i=t.GetPanelGroup();i&&i.HideActivePanel(),t.ResizeFonts(),t.Show(),i&&i.SetActivePanel(t)}}},window.TV={Init:D}}();